<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>小超子的博客</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://rain120.github.io/"/>
  <updated>2019-02-04T10:41:30.213Z</updated>
  <id>https://rain120.github.io/</id>
  
  <author>
    <name>小超子</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Nginx + Node + Vue 部署初试</title>
    <link href="https://rain120.github.io/2019/02/04/node-vue-nginx/"/>
    <id>https://rain120.github.io/2019/02/04/node-vue-nginx/</id>
    <published>2019-02-04T10:26:05.000Z</published>
    <updated>2019-02-04T10:41:30.213Z</updated>
    
    <content type="html"><![CDATA[<h2 id="趁着爸妈做年夜饭之前，把之前做的笔记贴出来，新的一年到了，祝大家"><a href="#趁着爸妈做年夜饭之前，把之前做的笔记贴出来，新的一年到了，祝大家" class="headerlink" title="趁着爸妈做年夜饭之前，把之前做的笔记贴出来，新的一年到了，祝大家"></a>趁着爸妈做年夜饭之前，把之前做的笔记贴出来，新的一年到了，祝大家</h2><p><img src="data:image/jpeg;base64,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" alt="New Year&#39;s Eve"></p><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b70406fa0eda5?w=251&amp;h=201&amp;f=jpeg&amp;s=6794" alt="Rich overnight"></p><h3 id="Nginx-Node-Vue-部署初试"><a href="#Nginx-Node-Vue-部署初试" class="headerlink" title="Nginx + Node + Vue 部署初试"></a><a href="https://www.nginx.com/" target="_blank" rel="noopener"><code>Nginx</code></a> + <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener"><code>Node</code></a> + <a href="https://vuefe.cn/" target="_blank" rel="noopener"><code>Vue</code></a> 部署初试</h3><p><a href="https://www.zhihu.com/people/yan-yang-nian-hua-120/activities" target="_blank" rel="noopener">知乎</a></p><p><a href="https://rain120.github.io/">个人博客</a></p><p><a href="https://github.com/Rain120" target="_blank" rel="noopener">Github</a></p><p><a href="https://github.com/Rain120/study-notes" target="_blank" rel="noopener">日常学习笔记</a></p><h5 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a><strong><code>Nginx</code></strong></h5><ol><li><p><a href="https://www.nginx.com/resources/glossary/nginx/" target="_blank" rel="noopener">定义</a></p><p>异步框架的 <a href="https://en.wikipedia.org/wiki/Web_server" target="_blank" rel="noopener">Web服务器</a>，也可以用作<a href="https://en.wikipedia.org/wiki/Reverse_proxy" target="_blank" rel="noopener">反向代理</a>，<a href="https://en.wikipedia.org/wiki/Load_balancer" target="_blank" rel="noopener">负载平衡器</a> , <a href="https://en.wikipedia.org/wiki/HTTP_cache" target="_blank" rel="noopener">HTTP缓存</a>, 媒体流等的开源软件。它最初是一个旨在实现最高性能和稳定性的<code>Web</code>服务器。除了<code>HTTP</code>服务器功能外，<code>NGINX</code>还可以用作电子邮件（<code>IMAP</code>，<code>POP3</code>和<code>SMTP</code>）的代理服务器以及<code>HTTP</code>，<code>TCP</code>和<code>UDP</code>服务器的反向代理和负载平衡器。</p></li><li><p>特点</p><ul><li>更快</li><li>高扩展性, <code>Nginx</code>的模块都是嵌入到二进制文件中执行</li><li>高可靠性</li><li>低内存消耗</li><li>单机支持10万次的并发连接</li><li>热部署, <code>master</code>管理进行与<code>work</code>工作进程分离设计，因此具备热部署功能</li><li>最自由的<code>BSD</code>许可协议</li></ul></li><li><p>功能</p><ul><li>静态服务（<code>css</code> , <code>js</code> , <code>html</code>, <code>images</code>, <code>videos</code>）</li><li><code>SSL</code> 和 <code>TLS SNI</code>支持</li><li><code>HTTP/HTTPS</code>, <code>SMTP</code>, <code>IMAP/POP3</code> 反向代理</li><li><code>FastCGI</code>反向代理</li><li>负载均衡</li><li>页面缓存（<code>CDN</code>）</li><li>支持<code>gzip</code>、<code>expirse</code></li><li>支持 <code>keep-alive</code> 和管道连接</li><li>基于 <code>PCRE</code> 的 <code>rewrite</code> 重写模块</li><li>带宽限制</li><li>基于<code>IP</code> 和名称的虚拟主机服务</li><li>支持访问速率、并发限制</li><li>反向代理（适用<code>2000WPV</code>、并发连接<code>1W</code>/秒），简单的负载均衡和容错</li><li>基于客户端<code>IP</code> 地址和 <code>HTTP</code> 基本认证的访问控制</li></ul></li></ol><h5 id="Mac-安装Nginx"><a href="#Mac-安装Nginx" class="headerlink" title="Mac 安装Nginx"></a><code>Mac</code> 安装<code>Nginx</code></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 推荐使用`brew`, 安装`homebrew`</span><br><span class="line">/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span><br><span class="line">// Homebrew 安装 Nginx </span><br><span class="line">brew install nginx</span><br><span class="line">// Mac 下 Nginx的目录</span><br><span class="line">cd /usr/local/etc/nginx</span><br><span class="line">ll -al</span><br><span class="line">vim nginx.conf</span><br></pre></td></tr></table></figure><p><a href="https://brew.sh/" target="_blank" rel="noopener"><code>homebrew</code>详见</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6e95636747ba?w=672&amp;h=520&amp;f=png&amp;s=525246" alt="cd-nginx"></p><h5 id="Nginx-参数列表"><a href="#Nginx-参数列表" class="headerlink" title="Nginx 参数列表"></a>Nginx 参数列表</h5><table><thead><tr><th>配置参数属性</th><th>解释说明</th><th>参数列表</th></tr></thead><tbody><tr><td>user</td><td>设置nginx服务的系统使用用户</td><td><code>nobody</code>(注意：此处用户如果比启动<code>Nginx</code>的用户权限低，你需要使用当前用户重启<code>Nginx</code>)<br><code>nginx -s stop</code> 关闭<code>nginx</code>-&gt; <code>nginx</code> 启动-&gt; `ps aux</td><td>grep nginx`查看启动用户</td></tr><tr><td>worker_processes</td><td>开启的线程数</td><td>一般与服务器核数保持一致</td></tr><tr><td>error_log</td><td>定位全局错误日志文件</td><td>错误日志定义等级，[ debug \</td><td>info notice \</td><td>warn \</td><td>error \</td><td>crit ]，debug输出最多，crir输出最少</td></tr><tr><td>pid</td><td>指定进程id的存储文件位置</td><td></td></tr><tr><td>worker_rlimit_nofile</td><td>指定一个nginx进程打开的最多文件描述符数目，受系统进程的最大打开文件数量限制</td><td></td></tr><tr><td>events</td><td>包含<em>Nginx</em>中所有处理连接的设置</td><td></td></tr><tr><td>http</td><td>Nginx http处理的所有核心特性</td></tr></tbody></table><h5 id="Event"><a href="#Event" class="headerlink" title="Event"></a><strong><code>Event</code></strong></h5><table><thead><tr><th>配置参数属性</th><th>解释说明</th><th>参数列表</th></tr></thead><tbody><tr><td>worker_connections</td><td>定义每个进程的最大连接数,受系统进程的最大打开文件数量限制</td><td>单个后台worker process进程的最大并发链接数 （最大连接数= worker_processes <em> worker_connections）<br>在反向代理环境下：<br>最大连接数 = worker_processes </em> worker_connections / 4</td></tr><tr><td>use</td><td>工作进程数</td><td>[ epoll \</td><td>/dev/poll \</td><td>poll \</td><td>eventport \</td><td>kqueue \</td><td>select \</td><td>rtsig ]</td></tr><tr><td>multi_accept</td><td>一个新连接通知后接受尽可能多的连接</td><td>on / off</td></tr><tr><td>accept_mutex</td><td>开启或者禁用使用互斥锁来打开sockets</td><td>on / off</td></tr></tbody></table><p><code>Event Use</code>支持的事件模型</p><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6e9bf880aab9?w=823&amp;h=540&amp;f=png&amp;s=132134" alt="events-use"></p><p><a href="https://www.myfreax.com/nginx-event-module-introduction/" target="_blank" rel="noopener"><code>Events</code>详见</a></p><h5 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a><strong><code>HTTP</code></strong></h5><table><thead><tr><th>配置参数属性</th><th>解释说明</th><th>参数列表</th></tr></thead><tbody><tr><td>include</td><td>主模块指令，实现对配置文件所包含的文件的设定，可以减少主配置文件的复杂度，DNS主配置文件中的zonerfc1912,acl基本上都是用include语句</td><td></td></tr><tr><td>default_type</td><td>核心模块指令</td><td>默认设置为二进制流，也就是当文件类型未定义时使用这种方式</td></tr><tr><td>log_format</td><td>日志格式的设定</td><td>日志格式的名称，可自行设置，后面引用</td></tr><tr><td>access_log</td><td>引用日志</td><td>引用log_format设置的名称</td></tr><tr><td>keepalive_timeout</td><td>设置客户端连接保存活动的超时时间</td><td>0是无限制</td></tr><tr><td>sendfile</td><td>开启高效文件传输模式</td><td>on / off</td></tr><tr><td>tcp_nopush</td><td>开启防止网络阻塞</td><td>on / off</td></tr><tr><td>tcp_nodelay</td><td>开启防止网络阻塞</td><td>on / off</td></tr><tr><td>upstream</td><td>负载均衡</td><td></td></tr><tr><td>server</td><td>Nginx的server虚拟主机配置</td></tr></tbody></table><h5 id="Upstream"><a href="#Upstream" class="headerlink" title="Upstream"></a><strong><code>Upstream</code></strong></h5><table><thead><tr><th>配置参数属性</th><th>解释说明</th></tr></thead><tbody><tr><td>轮询（默认）</td><td>每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。</td></tr><tr><td>weight</td><td>指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况</td></tr><tr><td>ip_hash</td><td>每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。</td></tr><tr><td>fair（第三方）</td><td>按后端服务器的响应时间来分配请求，响应时间短的优先分配。</td></tr><tr><td>url_hash（第三方）</td><td>按访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，后端服务器为缓存时比较有效。</td></tr></tbody></table><p><code>weight</code> 默认为1.<code>weight</code>越大，负载的权重就越大。</p><h6 id="Nginx-Upstream状态"><a href="#Nginx-Upstream状态" class="headerlink" title="Nginx Upstream状态"></a><code>Nginx Upstream</code>状态</h6><p>例如：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">upstream</span> news &#123;</span><br><span class="line">    <span class="attribute">server</span> <span class="number">127.0.0.1:9527</span> backup;</span><br><span class="line">    <span class="attribute">server</span> <span class="number">127.0.0.1:9527</span> weight=<span class="number">1</span> max_fails=<span class="number">2</span> fail_timeout=<span class="number">3</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>配置参数属性</th><th>解释说明</th></tr></thead><tbody><tr><td>backup</td><td>预留的备份服务器</td></tr><tr><td>down</td><td>当前的server暂时不参与负载均衡</td></tr><tr><td>fail_timeout</td><td>经过max_fails 失败后，服务暂停的时间</td></tr><tr><td>max_conns</td><td>限制最大的接收的连接数</td></tr><tr><td>max_fails</td><td>允许请求失败的次数</td></tr></tbody></table><p><code>use location</code>：在<code>server</code>中添加</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">proxy_pass</span> http://127.0.0.1:9527;</span><br><span class="line">// 因为我的API接口是这个，such as /api/profile</span><br><span class="line">// location 具体匹配规则详见后面</span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ /api/</span> &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://127.0.0.1:9527;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Server"><a href="#Server" class="headerlink" title="Server"></a><strong><code>Server</code></strong></h5><table><thead><tr><th>配置参数属性</th><th>解释说明</th><th>参数列表</th></tr></thead><tbody><tr><td>listen</td><td>监听端口</td><td>http -&gt; 80 / https -&gt; 443</td></tr><tr><td>server_name</td><td>设置主机域名</td><td>localhost</td></tr><tr><td>charset</td><td>设置访问的语言编码</td><td></td></tr><tr><td>access_log</td><td>设置虚拟主机访问日志的存放路径及日志的格式</td><td></td></tr><tr><td>location</td><td>设置虚拟主机的基本信息</td></tr></tbody></table><h5 id="Location"><a href="#Location" class="headerlink" title="Location"></a><strong><code>Location</code></strong></h5><table><thead><tr><th style="text-align:left">配置参数属性</th><th>解释说明</th><th>参数列表</th></tr></thead><tbody><tr><td style="text-align:left">root</td><td>设置虚拟主机的网站根目录</td><td>Vue项目的根目录/Users/rainy/Desktop/MyWork/Work/cloudwiz-website/dist</td></tr><tr><td style="text-align:left">index</td><td>设置虚拟主机默认访问的网页</td><td>index.html index.htm</td></tr><tr><td style="text-align:left">proxy</td><td>通过不同协议将请求从NGINX传递到代理服务器</td></tr></tbody></table><ul><li><code>=</code>: 开头表示精确匹配，如 <code>api</code> 中只匹配根目录结尾的请求，后面不能带任何字符串.</li><li><code>^~</code> :开头表示<code>uri</code>以某个常规字符串开头，不是正则匹配.</li><li><code>~</code>: 开头表示区分大小写的正则匹配.</li><li><code>~*</code>: 开头表示不区分大小写的正则匹配.</li><li><code>/</code> : 通用匹配, 如果没有其它匹配,任何请求都会匹配到.</li></ul><p>匹配优先级(高到低)</p><ol><li><code>location =</code> </li><li><code>location 完整路径</code></li><li><code>location ^~ 路径</code></li><li><code>location ~,~* 正则顺序</code></li><li><code>location 部分起始路径</code>  </li><li><code>/</code></li></ol><p><a href="http://seanlook.com/2015/05/17/nginx-location-rewrite/" target="_blank" rel="noopener">详见<code>Location</code>配置</a></p><h5 id="Reverse-Proxy"><a href="#Reverse-Proxy" class="headerlink" title="Reverse Proxy"></a><strong><code>Reverse Proxy</code></strong></h5><p>当<code>NGINX</code>代理请求时，它会将请求发送到指定的代理服务器，获取响应并将其发送回客户端。可以使用指定的协议将请求代理到<code>HTTP</code>服务器（另一个<code>NGINX</code>服务器或任何其他服务器）或非<code>HTTP</code>服务器（可以运行使用特定框架（如<code>PHP</code>或<code>Python</code>）开发的应用程序）。</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span>  / some / path /  &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span>  http://www.example.com:8080;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">proxy_set_header</span>  Host  $ host ; </span><br><span class="line">    <span class="attribute">proxy_set_header</span>  X-Real-IP  $ remote_addr ;</span><br><span class="line">    </span><br><span class="line">    // 禁用特定位置的缓冲</span><br><span class="line">    <span class="attribute">proxy_buffering</span>  <span class="literal">off</span> ;</span><br><span class="line">    <span class="attribute">proxy_buffers</span>  <span class="number">16</span>  <span class="number">4k</span> ; </span><br><span class="line">    <span class="attribute">proxy_buffer_size</span>  <span class="number">2k</span> ;</span><br><span class="line">    </span><br><span class="line">    proxy_bind  127.0.0.2 ; // IP地址也可以用变量指定</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将请求传递给非<code>HTTP</code>代理服务器，<code>**_pass</code>应使用相应的指令：</p><ul><li><a href="http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_pass" target="_blank" rel="noopener"><code>fastcgi_pass</code></a> 将请求传递给FastCGI服务器</li><li><a href="http://nginx.org/en/docs/http/ngx_http_uwsgi_module.html#uwsgi_pass" target="_blank" rel="noopener"><code>uwsgi_pass</code></a> 将请求传递给uwsgi服务器</li><li><a href="http://nginx.org/en/docs/http/ngx_http_scgi_module.html#scgi_pass" target="_blank" rel="noopener"><code>scgi_pass</code></a> 将请求传递给SCGI服务器</li><li><a href="http://nginx.org/en/docs/http/ngx_http_memcached_module.html#memcached_pass" target="_blank" rel="noopener"><code>memcached_pass</code></a> 将请求传递给memcached服务器</li></ul><table><thead><tr><th>配置参数属性</th><th>解释说明</th><th>参数列</th></tr></thead><tbody><tr><td>proxy_pass</td><td>将请求传递给HTTP代理服务器</td><td></td></tr><tr><td>proxy_set_header</td><td>传递请求标头</td><td>默认情况下，NGINX在代理请求中重新定义两个头字段“Host”和“Connection”，并删除其值为空字符串的头字段。“Host”设置为<code>$proxy_host</code>变量，“Connection”设置为<code>close</code>。</td></tr><tr><td><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html?&amp;_ga=2.89865052.677515471.1548386810-1443831467.1548386810#proxy_buffering" target="_blank" rel="noopener"><code>proxy_buffering</code></a></td><td>负责启用和禁用缓冲</td><td>on / off</td></tr><tr><td>proxy_buffers</td><td>请求分配的缓冲区的大小和数量</td><td></td></tr><tr><td>proxy_buffer_size</td><td>代理服务器的响应的第一部分存储在单独的缓冲区大小</td><td>通常包含一个相对较小的响应头，并且可以比其余响应的缓冲区小。</td></tr><tr><td>proxy_bind</td><td>接受来自特定IP网络或IP地址范围的连接</td><td>指定<a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_bind" target="_blank" rel="noopener"><code>proxy_bind</code></a>必要网络接口的指令和IP地址</td></tr></tbody></table><p><a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/" target="_blank" rel="noopener">详见<code>Proxy</code></a></p><h5 id="全局变量Global-Variable"><a href="#全局变量Global-Variable" class="headerlink" title="全局变量Global Variable"></a><strong>全局变量<code>Global Variable</code></strong></h5><table><thead><tr><th>变量名</th><th>变量含义</th></tr></thead><tbody><tr><td>$args</td><td>请求中的参数</td></tr><tr><td>$content_length</td><td><code>HTTP</code>请求信息里的<code>Content-Length</code></td></tr><tr><td>$content_type</td><td>请求信息里的<code>Content-Type</code></td></tr><tr><td>$host</td><td>请求信息中的<code>Host</code>，如果请求中没有<code>Host</code>行，则等于设置的服务器名</td></tr><tr><td>$http_cookie</td><td><code>cookie</code> 信息</td></tr><tr><td>$http_referer</td><td>引用地址</td></tr><tr><td>$http_user_agent</td><td>客户端代理信息</td></tr><tr><td>$remote_addr</td><td>客户端地址</td></tr><tr><td>$remote_port</td><td>客户端端口号</td></tr><tr><td>$remote_user</td><td>客户端用户名，认证用</td></tr><tr><td>$request_method</td><td>请求的方法，比如<code>GET</code>、<code>POST</code>等</td></tr><tr><td>$request_uri</td><td>完整的原始请求<code>URI</code>（带参数）</td></tr><tr><td>$scheme</td><td>请求方案，<code>http</code>或<code>https</code></td></tr><tr><td>$server_addr</td><td>接受请求的服务器的地址,如果没有用<code>listen</code>指明服务器地址，使用这个变量将发起一次系统调用以取得地址(造成资源浪费);</td></tr><tr><td>$server_protocol</td><td>请求的协议版本，<code>HTTP/1.0</code>或<code>HTTP/1.1</code></td></tr><tr><td>$uri</td><td>请求中的当前<code>URI</code>, <code>$uri</code>在请求处理期间 ，值可能会发生变化，例如在执行内部重定向或使用索引文件时</td></tr></tbody></table><p>全局变量详见<a href="http://nginx.org/en/docs/varindex.html" target="_blank" rel="noopener"><code>Alphabetical index of variables</code></a></p><p>修改 <code>http</code> <code>server</code>中的配置</p><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6ebb776e68c3?w=1066&amp;h=858&amp;f=png&amp;s=1115645" alt="nginx-config"></p><p>启动<code>Nginx</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br><span class="line">ps -ef | grep nginx</span><br></pre></td></tr></table></figure><p>重启<code>Nginx</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><p>关闭<code>Nginx</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s stop</span><br></pre></td></tr></table></figure><p>因为我已经启动了，所以就重启一下<code>Nginx</code>即可</p><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6ec0bbc63f63?w=852&amp;h=156&amp;f=png&amp;s=209188" alt="nginx-reload"></p><h5 id="Linux安装Nginx"><a href="#Linux安装Nginx" class="headerlink" title="Linux安装Nginx"></a><code>Linux</code>安装<code>Nginx</code></h5><p><a href="http://www.runoob.com/linux/nginx-install-setup.html" target="_blank" rel="noopener"><code>Linux</code>安装</a></p><p><a href="http://man.linuxde.net/par/2" target="_blank" rel="noopener">常见的<code>Linux</code>命令</a></p><p>使用<code>pstree</code>查看当前服务器启动的进程</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree</span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6ebb7f093e12?w=1108&amp;h=936&amp;f=png&amp;s=1338225" alt="pstree"></p><p>查找<code>Nginx</code>的位置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux | grep nginx</span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6ebb7f29c4dd?w=1586&amp;h=119&amp;f=png&amp;s=165609" alt="server-where-nginx"></p><p>进入<code>nginx</code>的目录</p><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6ece5262fc5c?w=686&amp;h=290&amp;f=png&amp;s=324959" alt="212-server-nginx"></p><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6ece58073b95?w=1041&amp;h=489&amp;f=png&amp;s=694514" alt="nginx-conf"></p><p>然后配置<code>nginx.conf</code>文件即可</p><h6 id="Docker安装Nginx"><a href="#Docker安装Nginx" class="headerlink" title="Docker安装Nginx"></a><code>Docker</code>安装<code>Nginx</code></h6><ol><li><p>查找 <a href="https://hub.docker.com/r/library/nginx/" target="_blank" rel="noopener">Docker Hub</a> 上的 <code>nginx</code>镜像</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> search nginx</span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6ece581d84f6?w=1469&amp;h=178&amp;f=png&amp;s=195631" alt="docker-search"></p></li><li><p>拉取官方镜像</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> pull nginx</span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>查看当前镜像</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> images nginx</span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6edd7089a854?w=823&amp;h=63&amp;f=png&amp;s=40857" alt="docker-images"></p></li></ol><h5 id="Server-Tree"><a href="#Server-Tree" class="headerlink" title="Server Tree"></a><code>Server Tree</code></h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">tree -C -L <span class="number">3</span> -I <span class="string">'*node_modules*'</span></span><br><span class="line"></span><br><span class="line">├── server</span><br><span class="line">│   ├── app.js</span><br><span class="line">│   ├── db</span><br><span class="line">│   │   ├── db.js</span><br><span class="line">│   │   └── newsSql.js</span><br><span class="line">│   ├── package-lock.json</span><br><span class="line">│   ├── package.json</span><br><span class="line">│   └── routers</span><br><span class="line">│       ├── news.js</span><br><span class="line">│       └── router.js</span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6edd70c86c2f?w=1080&amp;h=776&amp;f=png&amp;s=1026540" alt="file-tree"></p><h4 id="Node-Server"><a href="#Node-Server" class="headerlink" title="Node Server"></a><code>Node Server</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br><span class="line">npm install express mysql body-parser -S</span><br></pre></td></tr></table></figure><ol><li><p><code>app.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">'./routers/router'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PORT = <span class="number">9527</span></span><br><span class="line"></span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">true</span> &#125;))</span><br><span class="line"></span><br><span class="line">app.use(router)</span><br><span class="line"></span><br><span class="line">app.listen(PORT, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Listen port at <span class="subst">$&#123;PORT&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>db.js</code> -&gt; <code>Mysql</code>配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mysql: &#123;</span><br><span class="line">    host: <span class="string">'localhost'</span>,</span><br><span class="line">    user: <span class="string">'root'</span>,</span><br><span class="line">    password: <span class="string">'xxxx'</span>,</span><br><span class="line">    database: <span class="string">'test'</span>,</span><br><span class="line">    port: <span class="string">'3306'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>router.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.Router()</span><br><span class="line"><span class="keyword">const</span> news = <span class="built_in">require</span>(<span class="string">'./news'</span>)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/api/news/queryAll'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  news.queryAll(req, res, next)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/api/news/query'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  news.queryById(req, res, next)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/api/news/add'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  news.add(req, res, next)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/api/news/update'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  news.update(req, res, next)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.delete(<span class="string">'/api/news/deleteNews'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  news.deleteNews(req, res, next)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router</span><br></pre></td></tr></table></figure></li><li><p><code>newSql.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  createNews: <span class="string">`CREATE TABLE news (</span></span><br><span class="line"><span class="string">    id int(255) NOT NULL AUTO_INCREMENT,</span></span><br><span class="line"><span class="string">    type varchar(255) CHARACTER SET utf8 NOT NULL,</span></span><br><span class="line"><span class="string">    title varchar(255) CHARACTER SET utf8 NOT NULL,</span></span><br><span class="line"><span class="string">    description varchar(255) CHARACTER SET utf8 NOT NULL,</span></span><br><span class="line"><span class="string">    occur_time varchar(255) CHARACTER SET utf8 NOT NULL,</span></span><br><span class="line"><span class="string">    url varchar(255) NOT NULL,</span></span><br><span class="line"><span class="string">    newsImg varchar(255) NOT NULL,</span></span><br><span class="line"><span class="string">    PRIMARY KEY (id)</span></span><br><span class="line"><span class="string">  )`</span>,</span><br><span class="line">  queryAll: <span class="string">'SELECT * FROM news'</span>,</span><br><span class="line">  queryById: <span class="string">'SELECT * FROM news WHERE id = ?'</span>,</span><br><span class="line">  add: <span class="string">'INSERT INTO news (type, title, description, occur_time, url, newsImg) VALUES (?, ?, ?, ?, ?, ?)'</span>,</span><br><span class="line">  update: <span class="string">'UPDATE news SET type = ?, title = ?, description = ?, occur_time = ?, url = ?, newsImg = ? WHERE id = ?'</span>,</span><br><span class="line">  <span class="keyword">delete</span>: <span class="string">'DELETE FROM news WHERE id = ?'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>news.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>)</span><br><span class="line"><span class="keyword">const</span> db = <span class="built_in">require</span>(<span class="string">'../db/db'</span>)</span><br><span class="line"><span class="keyword">const</span> $newsSql = <span class="built_in">require</span>(<span class="string">'../db/newsSql'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pool = mysql.createPool(db.mysql)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> queryAll = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  pool.getConnection(<span class="function">(<span class="params">error, connect</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> error</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      connect.query($newsSql.queryAll, (error, data) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">          <span class="keyword">throw</span> error</span><br><span class="line">        &#125;</span><br><span class="line">        res.json(&#123;</span><br><span class="line">          code: <span class="string">'200'</span>,</span><br><span class="line">          msg: <span class="string">'success'</span>,</span><br><span class="line">          data</span><br><span class="line">        &#125;)</span><br><span class="line">        connect.release()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> queryById = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> id = +req.query.id</span><br><span class="line">  pool.getConnection(<span class="function">(<span class="params">error, connect</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> error</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      connect.query($newsSql.queryById, id, (error, data) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">          <span class="keyword">throw</span> error</span><br><span class="line">        &#125;</span><br><span class="line">        res.json(&#123;</span><br><span class="line">          code: <span class="string">'200'</span>,</span><br><span class="line">          msg: <span class="string">'success'</span>,</span><br><span class="line">          data</span><br><span class="line">        &#125;)</span><br><span class="line">        connect.release()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> add = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> rb = req.body</span><br><span class="line">  <span class="keyword">let</span> params = [rb.type, rb.title, rb.description, rb.occur_time, rb.url, rb.newsImg]</span><br><span class="line">  pool.getConnection(<span class="function">(<span class="params">error, connect</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> error</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      connect.query($newsSql.add, params, (error, data) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">          <span class="keyword">throw</span> error</span><br><span class="line">        &#125;</span><br><span class="line">        res.json(&#123;</span><br><span class="line">          code: <span class="string">'200'</span>,</span><br><span class="line">          msg: <span class="string">'success'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        connect.release()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> update = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> rb = req.body</span><br><span class="line">  <span class="keyword">let</span> params = [rb.type, rb.title, rb.description, rb.occur_time, rb.url, rb.newsImg, rb.id]</span><br><span class="line">  pool.getConnection(<span class="function">(<span class="params">error, connect</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> error</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      connect.query($newsSql.update, [...params], (error, data) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">          <span class="keyword">throw</span> error</span><br><span class="line">        &#125;</span><br><span class="line">        res.json(&#123;</span><br><span class="line">          code: <span class="string">'200'</span>,</span><br><span class="line">          msg: <span class="string">'success'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        connect.release()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> deleteNews = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> id = +req.query.id</span><br><span class="line">  pool.getConnection(<span class="function">(<span class="params">error, connect</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> error</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      connect.query($newsSql.delete, id, (error, data) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">          <span class="keyword">throw</span> error</span><br><span class="line">        &#125;</span><br><span class="line">        res.json(&#123;</span><br><span class="line">          code: <span class="string">'200'</span>,</span><br><span class="line">          msg: <span class="string">'success'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        connect.release()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  queryAll,</span><br><span class="line">  queryById,</span><br><span class="line">  add,</span><br><span class="line">  update,</span><br><span class="line">  deleteNews</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h5 id="Vue配置代理以及使用api"><a href="#Vue配置代理以及使用api" class="headerlink" title="Vue配置代理以及使用api"></a><code>Vue</code>配置代理以及使用<code>api</code></h5><ol><li><p><code>config/index.js</code> 修改<code>proxyTable</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  dev: &#123;</span><br><span class="line">    proxyTable: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">        target: <span class="string">'http://127.0.0.1:9527'</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">'/api'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用<code>axios</code>调用接口</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">export default &#123;</span><br><span class="line">  created () &#123;</span><br><span class="line">    this._getAllNews()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    _getAllNews () &#123;</span><br><span class="line">      axios.get(&apos;/api/news/queryAll&apos;).then(res =&gt; &#123;</span><br><span class="line">            if (+res.data.code === SCC_CODE) &#123;</span><br><span class="line">              this.news = res.data.data</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h6 id="Vue-build打包"><a href="#Vue-build打包" class="headerlink" title="Vue build打包"></a><code>Vue build</code>打包</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6f689db4988a?w=1023&amp;h=1030&amp;f=png&amp;s=1500107" alt="vue-build"></p><p>因为我的<code>Server</code>端是<code>Express</code>写的，启动<code>Server</code>需要使用<code>Node</code>，所以我们需要在服务器上安装<code>Node</code>.</p><h5 id="Linux安装Node-8-x"><a href="#Linux安装Node-8-x" class="headerlink" title="Linux安装Node 8.x"></a><code>Linux</code>安装<code>Node 8.x</code></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Using Ubuntu</span></span><br><span class="line">curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -</span><br><span class="line">sudo apt-get install -y nodejs</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Using Debian, as root</span></span><br><span class="line">curl -sL https://deb.nodesource.com/setup_8.x | bash -</span><br><span class="line">apt-get install -y nodejs</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Using Centos</span></span><br><span class="line">curl -sL https://rpm.nodesource.com/setup_8.x | bash -</span><br><span class="line">yum install -y nodejs</span><br></pre></td></tr></table></figure><p><a href="https://my.oschina.net/idoop/blog/1545011" target="_blank" rel="noopener">具体安装各版本的<code>Node</code>详见</a></p><p>启动<code>Node</code></p><p>此处我之前的命令执行错误，所以我需要<code>kill</code>这个进程</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup node website/server/app.js &amp;</span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6edd718f5dd2?w=1879&amp;h=523&amp;f=png&amp;s=1259304" alt="node-nohup"></p><p><strong><code>nohup</code></strong>:可以将程序以忽略挂起信号的方式运行起来，被运行的程序的输出信息将不会显示到终端。</p><p>无论是否将 <code>nohup</code>命令的输出重定向到终端，输出都将附加到当前目录的 <code>nohup.out</code>文件中。如果当前目录的 <code>nohup.out</code> 文件不可写，输出重定向到<code>$HOME/nohup.out</code>文件中。如果没有文件能创建或打开以用于追加，那么 <a href="http://man.linuxde.net/command" target="_blank" rel="noopener"><code>command</code></a> 参数指定的命令不可调用。如果标准错误是一个终端，那么把指定的命令写给标准错误的所有输出作为标准输出重定向到相同的文件描述符。</p><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6f689da1ce18?w=993&amp;h=93&amp;f=png&amp;s=127350" alt="nohup-out"></p><p>到这里，我们的<code>Web</code>，<code>Node Server</code> ，<code>Nginx</code>都已经配置并启动好了，我们只需要到浏览器输入<code>你的服务器IP:8080</code>即可.</p><p><a href="https://www.nginx.com/resources/glossary/" target="_blank" rel="noopener"><code>Nginx</code>众多概念详见官方词汇表</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/2/4/168b6f689d94d399?w=742&amp;h=721&amp;f=png&amp;s=102012" alt="nginx-glossary"></p><ul><li><a href="https://www.nginx.com/resources/glossary/application-delivery/" target="_blank" rel="noopener">什么是应用交付？</a></li><li><a href="https://www.nginx.com/resources/glossary/application-delivery-controller/" target="_blank" rel="noopener">什么是应用交付控制器（ADC）？</a></li><li><a href="https://www.nginx.com/resources/glossary/application-server-vs-web-server/" target="_blank" rel="noopener">什么是应用程序服务器与Web服务器？</a></li><li><a href="https://www.nginx.com/resources/glossary/caching/" target="_blank" rel="noopener">什么是缓存？</a></li><li><a href="https://www.nginx.com/resources/glossary/cloud-load-balancing" target="_blank" rel="noopener">什么是云负载平衡？</a></li><li><a href="https://www.nginx.com/resources/glossary/clustering/" target="_blank" rel="noopener">什么是聚类？</a></li><li><a href="https://www.nginx.com/resources/glossary/devops/" target="_blank" rel="noopener">什么是DevOps？</a></li><li><a href="https://www.nginx.com/resources/glossary/distributed-denial-of-service/" target="_blank" rel="noopener">什么是分布式拒绝服务（DDoS）？</a></li><li><a href="https://www.nginx.com/resources/glossary/dns-load-balancing/" target="_blank" rel="noopener">什么是DNS负载平衡？</a></li><li><a href="https://www.nginx.com/resources/glossary/global-server-load-balancing/" target="_blank" rel="noopener">什么是全局服务器负载平衡？</a></li><li><a href="https://www.nginx.com/resources/glossary/high-availability/" target="_blank" rel="noopener">什么是高可用性？</a></li><li><a href="https://www.nginx.com/resources/glossary/http/" target="_blank" rel="noopener">什么是HTTP？</a></li><li><a href="https://www.nginx.com/resources/glossary/http2/" target="_blank" rel="noopener">什么是HTTP / 2？</a></li><li><a href="https://www.nginx.com/resources/glossary/hybrid-load-balancing/" target="_blank" rel="noopener">什么是混合负载均衡？</a></li><li><a href="https://www.nginx.com/resources/glossary/layer-4-load-balancing/" target="_blank" rel="noopener">什么是第4层负载均衡？</a></li><li><a href="https://www.nginx.com/resources/glossary/layer-7-load-balancing/" target="_blank" rel="noopener">什么是第7层负载平衡？</a></li><li><a href="https://www.nginx.com/resources/glossary/load-balancing/" target="_blank" rel="noopener">什么是负载平衡？</a></li><li><a href="https://www.nginx.com/resources/glossary/media-server/" target="_blank" rel="noopener">什么是媒体服务器？</a></li><li><a href="https://www.nginx.com/resources/glossary/microservices/" target="_blank" rel="noopener">什么是微服务？</a></li><li><a href="https://www.nginx.com/resources/glossary/network-load-balancer/" target="_blank" rel="noopener">什么是网络负载均衡器？</a></li><li><a href="https://www.nginx.com/resources/glossary/nginx/" target="_blank" rel="noopener">什么是NGINX？</a></li><li><a href="https://www.nginx.com/resources/glossary/progressive-download/" target="_blank" rel="noopener">什么是渐进式下载？</a></li><li><a href="https://www.nginx.com/resources/glossary/reverse-proxy-server/" target="_blank" rel="noopener">什么是反向代理服务器？</a></li><li><a href="https://www.nginx.com/resources/glossary/reverse-proxy-vs-load-balancer/" target="_blank" rel="noopener">什么是反向代理与负载均衡器？</a></li><li><a href="https://www.nginx.com/resources/glossary/round-robin-load-balancing/" target="_blank" rel="noopener">什么是循环负载平衡？</a></li><li><a href="https://www.nginx.com/resources/glossary/service-oriented-architecture/" target="_blank" rel="noopener">什么是面向服务的体系结构（SOA）？</a></li><li><a href="https://www.nginx.com/resources/glossary/session-persistence/" target="_blank" rel="noopener">什么是会话持久性？</a></li><li><a href="https://www.nginx.com/resources/glossary/ssl-load-balancer/" target="_blank" rel="noopener">什么是SSL负载均衡器？</a></li><li><a href="https://www.nginx.com/resources/glossary/web-acceleration/" target="_blank" rel="noopener">什么是Web加速？</a></li><li><a href="https://www.nginx.com/resources/glossary/web-server/" target="_blank" rel="noopener">什么是Web服务器？</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;趁着爸妈做年夜饭之前，把之前做的笔记贴出来，新的一年到了，祝大家&quot;&gt;&lt;a href=&quot;#趁着爸妈做年夜饭之前，把之前做的笔记贴出来，新的一年到了，祝大家&quot; class=&quot;headerlink&quot; title=&quot;趁着爸妈做年夜饭之前，把之前做的笔记贴出来，新的一年到了
      
    
    </summary>
    
    
      <category term="Vue" scheme="https://rain120.github.io/tags/Vue/"/>
    
      <category term="Node" scheme="https://rain120.github.io/tags/Node/"/>
    
      <category term="Nginx" scheme="https://rain120.github.io/tags/Nginx/"/>
    
      <category term="项目部署" scheme="https://rain120.github.io/tags/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>React+React-Route+Antd+Recharts+Excel(获取Excel数据，绘制Charts)</title>
    <link href="https://rain120.github.io/2019/01/01/charts/"/>
    <id>https://rain120.github.io/2019/01/01/charts/</id>
    <published>2019-01-01T04:39:44.000Z</published>
    <updated>2019-02-04T10:47:42.611Z</updated>
    
    <content type="html"><![CDATA[<h3 id="转眼间2018年就过去了，来到的2019新的一年，在这里，祝大家新年快乐。"><a href="#转眼间2018年就过去了，来到的2019新的一年，在这里，祝大家新年快乐。" class="headerlink" title="转眼间2018年就过去了，来到的2019新的一年，在这里，祝大家新年快乐。"></a>转眼间2018年就过去了，来到的2019新的一年，在这里，祝大家新年快乐。</h3><p><img src="data:image/jpeg;base64,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" alt="小心心送给大家"><br><a href="https://www.zhihu.com/people/yan-yang-nian-hua-120/activities" target="_blank" rel="noopener">知乎</a><br><a href="https://rain120.github.io/">个人博客</a><br><a href="https://github.com/Rain120" target="_blank" rel="noopener">Github</a><br><a href="https://rain120.github.io/charts/#/">Demo</a><br><a href="https://github.com/Rain120/charts" target="_blank" rel="noopener">Repo</a></p><h4 id="开发缘由：因为一个很重要的朋友需要绘制一些Charts，但是嫌弃手绘太慢，因此这次放假写了这个小东西"><a href="#开发缘由：因为一个很重要的朋友需要绘制一些Charts，但是嫌弃手绘太慢，因此这次放假写了这个小东西" class="headerlink" title="开发缘由：因为一个很重要的朋友需要绘制一些Charts，但是嫌弃手绘太慢，因此这次放假写了这个小东西"></a>开发缘由：因为一个很重要的朋友需要绘制一些Charts，但是嫌弃手绘太慢，因此这次放假写了这个小东西</h4><h4 id="当前进度：简单的Demo-Charts展示，包括AreaChart-BarChart-ComposedChart-LineChart-PieChart"><a href="#当前进度：简单的Demo-Charts展示，包括AreaChart-BarChart-ComposedChart-LineChart-PieChart" class="headerlink" title="当前进度：简单的Demo Charts展示，包括AreaChart, BarChart, ComposedChart, LineChart, PieChart"></a>当前进度：简单的Demo Charts展示，包括AreaChart, BarChart, ComposedChart, LineChart, PieChart</h4><h4 id="测试文件：src-common-files-info-xlsx"><a href="#测试文件：src-common-files-info-xlsx" class="headerlink" title="测试文件：src/common/files/info.xlsx"></a>测试文件：src/common/files/info.xlsx</h4><p>附上</p><ul><li><a href="http://recharts.org/" target="_blank" rel="noopener">Recharts</a></li><li><a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="noopener">React-Route</a></li></ul><p>先上两张照片吧</p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/16807829b35f97e2?w=1919&amp;h=907&amp;f=png&amp;s=137077" alt="Charts Demo"></p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/16807833d37134f3?w=1919&amp;h=906&amp;f=png&amp;s=135975" alt="Charts"></p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/1680783e8ccf13f9?w=1916&amp;h=898&amp;f=png&amp;s=88708" alt="Charts"></p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/168078442078da80?w=1918&amp;h=905&amp;f=png&amp;s=128490" alt="Charts"></p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/1680784b95d67c71?w=1648&amp;h=901&amp;f=png&amp;s=54377" alt="Excel Table"></p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/16807853a136f3dc?w=1913&amp;h=905&amp;f=png&amp;s=199753" alt="Charts"></p><h4 id="1、版本"><a href="#1、版本" class="headerlink" title="1、版本"></a>1、版本</h4><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/1680764de81e7b3a?w=382&amp;h=71&amp;f=png&amp;s=5886" alt="Antd"></p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/1680765a623e44a6?w=526&amp;h=495&amp;f=png&amp;s=74650" alt="React,Recharts, TS"></p><h4 id="2、创建项目"><a href="#2、创建项目" class="headerlink" title="2、创建项目"></a>2、创建项目</h4><p>因为公司使用的 <code>react</code>+<code>antd</code>+<code>ts</code>, 虽然<code>antd</code>前两天搞了个圣诞惊吓，但是毋庸置疑，这个组件库做的确实很好啊，我不怕被喷，辩证一分为二，不能因为别人犯一点的错误，就否认人家吧，废话不多说，还是讲本文的主题吧<br>首先先安装<code>create-react-app</code></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">npm </span>i -g <span class="built_in">create-react-app</span></span><br><span class="line"><span class="built_in">create-react-app</span> <span class="string">Charts </span><span class="built_in">--scripts-version=react-scripts-ts-antd</span></span><br></pre></td></tr></table></figure><p>然后安装<code>react-route-dom和recharts</code><br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yarn <span class="built_in">add</span> react-route-dom</span><br><span class="line"><span class="keyword">or</span></span><br><span class="line">npm i react-route-dom <span class="comment">--save</span></span><br><span class="line">npm i recharts <span class="comment">--save</span></span><br></pre></td></tr></table></figure></p><p>因为<code>TS</code>检查较为严格，所以，我对<code>TS</code>有一些我自己需要<code>rules</code>的配置<br><code>tslint.js</code><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"extends"</span>: [<span class="string">"tslint:recommended"</span>, <span class="string">"tslint-react"</span>, <span class="string">"tslint-config-prettier"</span>],</span><br><span class="line">  <span class="attr">"linterOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"exclude"</span>: [</span><br><span class="line">      <span class="string">"config/**/*.js"</span>,</span><br><span class="line">      <span class="string">"node_modules/**/*.ts"</span>,</span><br><span class="line">      <span class="string">"coverage/lcov-report/*.js"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"rules"</span>: &#123;</span><br><span class="line">    <span class="attr">"no-string-throw"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"no-unused-expression"</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">"no-unused-variable"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"no-use-before-declare"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"no-duplicate-variable"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"curly"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"class-name"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"triple-equals"</span>: [<span class="literal">true</span>, <span class="string">"allow-null-check"</span>],</span><br><span class="line">    <span class="attr">"comment-format"</span>: [<span class="literal">false</span>, <span class="string">"check-space"</span>],</span><br><span class="line">    <span class="attr">"eofline"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"forin"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"indent"</span>: [<span class="literal">true</span>, <span class="string">"spaces"</span>, <span class="number">2</span>],</span><br><span class="line">    <span class="attr">"label-position"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"max-line-length"</span>: [<span class="literal">true</span>, <span class="number">150</span>],</span><br><span class="line">    <span class="attr">"member-access"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"no-arg"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"no-bitwise"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"no-console"</span>: [<span class="literal">true</span>,</span><br><span class="line">      <span class="string">"debug"</span>,</span><br><span class="line">      <span class="string">"info"</span>,</span><br><span class="line">      <span class="string">"time"</span>,</span><br><span class="line">      <span class="string">"timeEnd"</span>,</span><br><span class="line">      <span class="string">"trace"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"no-construct"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"no-debugger"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"no-empty"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"no-eval"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"no-inferrable-types"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"no-shadowed-variable"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"no-string-literal"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"no-switch-case-fall-through"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"no-trailing-whitespace"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"no-var-keyword"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"object-literal-sort-keys"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"one-line"</span>: [<span class="literal">true</span>,</span><br><span class="line">      <span class="string">"check-open-brace"</span>,</span><br><span class="line">      <span class="string">"check-catch"</span>,</span><br><span class="line">      <span class="string">"check-else"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"radix"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"typedef-whitespace"</span>: [<span class="literal">true</span>, &#123;</span><br><span class="line">      <span class="attr">"call-signature"</span>: <span class="string">"nospace"</span>,</span><br><span class="line">      <span class="attr">"index-signature"</span>: <span class="string">"nospace"</span>,</span><br><span class="line">      <span class="attr">"parameter"</span>: <span class="string">"nospace"</span>,</span><br><span class="line">      <span class="attr">"property-declaration"</span>: <span class="string">"nospace"</span>,</span><br><span class="line">      <span class="attr">"variable-declaration"</span>: <span class="string">"nospace"</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="attr">"variable-name"</span>: [<span class="literal">true</span>, <span class="string">"ban-keywords"</span>],</span><br><span class="line">    <span class="attr">"whitespace"</span>: [<span class="literal">true</span>,</span><br><span class="line">      <span class="string">"check-branch"</span>,</span><br><span class="line">      <span class="string">"check-decl"</span>,</span><br><span class="line">      <span class="string">"check-type"</span>,</span><br><span class="line">      <span class="string">"check-preblock"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"ordered-imports"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"jsx-no-lambda"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"interface-name"</span>: [<span class="literal">true</span>, <span class="string">"never-prefix"</span>],</span><br><span class="line">    <span class="attr">"prefer-const"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><a href="https://zhuanlan.zhihu.com/p/40125375" target="_blank" rel="noopener">TS初试</a></p><p><code>React-Route 4.x</code>提供给我们使用的都是以组件形式存在的。我们使用的时候就像我们以前使用组件那样使用就行了，详见<a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="noopener">React-Route官方文档</a>。</p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/168078626ed506ff?w=1920&amp;h=1030&amp;f=png&amp;s=251575" alt="router配置"></p><p>菜单栏，我觉得日后可能还会增加其他的<code>Charts</code>，所以我将菜单通过配置文件来控制，增加复用性。</p><p><code>SideMenu.tsx</code><br><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">import React, &#123; Component &#125; from 'react';</span></span><br><span class="line"><span class="xml">import &#123; Link &#125; from 'react-router-dom';</span></span><br><span class="line"><span class="xml">import classnames from 'classnames';</span></span><br><span class="line"><span class="xml">import moment from 'moment';</span></span><br><span class="line"><span class="xml">import './index.scss';</span></span><br><span class="line"><span class="xml">import &#123; menus &#125; from './menus';</span></span><br><span class="line"><span class="xml">import &#123; Layout, Menu, Icon &#125; from 'antd';</span></span><br><span class="line"><span class="xml">import Timer from 'src/components/Timer/Timer';</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">const &#123; Header, Footer, Sider, Content &#125; = Layout;</span></span><br><span class="line"><span class="xml">const &#123; SubMenu &#125; = Menu;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">interface SideMenuProps &#123;</span></span><br><span class="line"><span class="xml">  children?: any;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">export default class SideMenu extends Component<span class="tag">&lt;<span class="name">SideMenuProps,</span> <span class="attr">any</span>&gt;</span> &#123;</span></span><br><span class="line"><span class="xml">  public state = &#123;</span></span><br><span class="line"><span class="xml">    collapsed: false,</span></span><br><span class="line"><span class="xml">    selectedKeys: [menus[0].key],</span></span><br><span class="line"><span class="xml">  &#125;;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  public toggle = () =&gt; &#123;</span></span><br><span class="line"><span class="xml">    this.setState(&#123;</span></span><br><span class="line"><span class="xml">      collapsed: !this.state.collapsed</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"><span class="xml">  &#125;;</span></span><br><span class="line"><span class="xml">  render() &#123;</span></span><br><span class="line"><span class="xml">    const &#123; collapsed, selectedKeys, &#125; = this.state</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    return (</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Layout</span> <span class="attr">className</span>=<span class="string">"side-menu"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Sider</span> <span class="attr">trigger</span>=<span class="string">&#123;null&#125;</span> <span class="attr">collapsible</span>=<span class="string">&#123;true&#125;</span> <span class="attr">collapsed</span>=<span class="string">&#123;collapsed&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"logo"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;require(</span>'<span class="attr">src</span>/<span class="attr">common</span>/<span class="attr">images</span>/<span class="attr">logo.png</span>')&#125; /&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://github.com/Rain120/charts"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&#123;classnames(</span>"<span class="attr">title</span>")&#125;&gt;</span><span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">"github"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.zhihu.com/people/yan-yang-nian-hua-120/activities"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&#123;classnames(</span>"<span class="attr">title</span>")&#125;&gt;</span><span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">"zhihu"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Menu</span> <span class="attr">theme</span>=<span class="string">"dark"</span> <span class="attr">mode</span>=<span class="string">"inline"</span> <span class="attr">defaultSelectedKeys</span>=<span class="string">&#123;selectedKeys&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;</span></span><br><span class="line"><span class="xml">              menus &amp;&amp; menus.map(menu =&gt; (</span></span><br><span class="line"><span class="xml">                menu.children</span></span><br><span class="line"><span class="xml">                  ? (</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">SubMenu</span> <span class="attr">key</span>=<span class="string">&#123;menu.key&#125;</span> <span class="attr">title</span>=<span class="string">&#123;</span>&lt;<span class="attr">span</span>&gt;</span><span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">&#123;menu.icon&#125;</span> /&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;menu.text&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">                      &#123;</span></span><br><span class="line"><span class="xml">                        menu.children.map(item =&gt; (</span></span><br><span class="line"><span class="xml">                          <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&#123;item.key&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;item.path&#125;</span>&gt;</span>&#123;item.text&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">                          <span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        ))</span></span><br><span class="line"><span class="xml">                      &#125;</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">SubMenu</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  ) : (</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&#123;menu.key&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">                      <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;menu.path&#125;</span> <span class="attr">style</span>=</span></span><span class="template-variable">&#123;&#123; overflow: 'hidden' &#125;&#125;</span><span class="xml"><span class="tag">&gt;</span><span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">&#123;menu.icon&#125;</span> /&gt;</span>&#123;menu.text&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  )</span></span><br><span class="line"><span class="xml">              ))</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">Menu</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Sider</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Layout</span> <span class="attr">className</span>=<span class="string">"r-content"</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Header</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Icon</span></span></span></span><br><span class="line"><span class="xml">              className="trigger"</span></span><br><span class="line"><span class="xml">              type=&#123;collapsed ? 'menu-unfold' : 'menu-fold'&#125;</span></span><br><span class="line"><span class="xml">              onClick=&#123;this.toggle&#125;</span></span><br><span class="line"><span class="xml">            /&gt;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Timer</span> <span class="attr">timerStyle</span>=<span class="string">"timer"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Content</span> <span class="attr">style</span>=</span></span><span class="template-variable">&#123;&#123; margin: '1rem', padding: '1rem', background: '#fff', minHeight: '25rem', &#125;&#125;</span><span class="xml"><span class="tag">&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;this.props.children&#125;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Footer</span> <span class="attr">style</span>=</span></span><span class="template-variable">&#123;&#123; textAlign: 'center' &#125;&#125;</span><span class="xml"><span class="tag">&gt;</span></span></span><br><span class="line"><span class="xml">            ©&#123;moment().format('YYYY')&#125; Created by Rainy</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="xml">    );</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure></p><p><code>Menu.ts</code></p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: Rainy</span></span><br><span class="line"><span class="comment"> * @Github: https://github.com/Rain120</span></span><br><span class="line"><span class="comment"> * @Date: 2018-12-30 15:43:12</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2018-12-31 13:28:04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">export <span class="keyword">const</span> menus = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">key</span>: <span class="string">'menu-0'</span>,</span><br><span class="line">    icon: <span class="string">'bar-chart'</span>,</span><br><span class="line">    <span class="built_in">text</span>: <span class="string">'Charts Demo Show'</span>,</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">key</span>: <span class="string">'menu-1'</span>,</span><br><span class="line">    icon: <span class="string">'dashboard'</span>,</span><br><span class="line">    <span class="built_in">text</span>: <span class="string">'ReCharts'</span>,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="built_in">key</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="built_in">text</span>: <span class="string">'Charts Drawer'</span>,</span><br><span class="line">        path: <span class="string">'/charts/charts-drawer'</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">] as any;</span><br></pre></td></tr></table></figure><p>获取<code>Excel</code>的数据是通过使用大佬的<code>xlsx</code>插件来实现的，详见<a href="https://sheetjs.com/" target="_blank" rel="noopener">XLSX官网</a>。<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="selector-tag">i</span> xlsx -S</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/168078b316af554d?w=457&amp;h=128&amp;f=png&amp;s=17176" alt="XLSX"></p><p>因为这次项目没有后端，所以其实我们对<code>Excel</code>文件的解析是在<code>upload</code>之前完成的<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> beforeUpload = <span class="function">(<span class="params">file: <span class="built_in">any</span>, fileList: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> rABS = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">const</span> f = fileList[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">    reader.onload = <span class="function">(<span class="params">e: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data: <span class="built_in">any</span> = e.target.result;</span><br><span class="line">        <span class="keyword">if</span> (!rABS) &#123;</span><br><span class="line">          data = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> workbook = XLSX.read(data, &#123;</span><br><span class="line">            <span class="keyword">type</span>: rABS ? <span class="string">'binary'</span> : <span class="string">'array'</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// more sheet</span></span><br><span class="line">        workbook.SheetNames.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> worksheet = workbook.Sheets[item];</span><br><span class="line">          <span class="keyword">var</span> jsonArr = XLSX.utils.sheet_to_json(worksheet, &#123; header: <span class="number">1</span> &#125;);</span><br><span class="line">          <span class="keyword">this</span>.handleImpotedJson(jsonArr);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (rABS) &#123;</span><br><span class="line">      reader.readAsBinaryString(f);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      reader.readAsArrayBuffer(f);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>upload config</code></p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const props = &#123;</span><br><span class="line">      accept: <span class="string">'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'</span>,</span><br><span class="line">      name: <span class="string">'file'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        authorization: <span class="string">'authorization-text'</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      multiple: false,</span><br><span class="line">      action: <span class="string">''</span>,</span><br><span class="line">      beforeUpload: (<span class="keyword">file</span>, fileList) =&gt; this.beforeUpload(<span class="keyword">file</span>, fileList),</span><br><span class="line">      onChange(<span class="keyword">info</span>) &#123;</span><br><span class="line">        const status = <span class="keyword">info</span>.<span class="keyword">file</span>.status;</span><br><span class="line">        <span class="keyword">if</span> (status !== <span class="string">'uploading'</span>) &#123;</span><br><span class="line">          console.log(<span class="keyword">info</span>.<span class="keyword">file</span>, <span class="keyword">info</span>.fileList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (status === <span class="string">'done'</span>) &#123;</span><br><span class="line">          message.success(`$&#123;info.<span class="keyword">file</span>.name&#125; <span class="keyword">file</span> uploaded successfully.`);</span><br><span class="line">        &#125; else <span class="keyword">if</span> (status === <span class="string">'error'</span>) &#123;</span><br><span class="line">          message.<span class="keyword">error</span>(`$&#123;info.<span class="keyword">file</span>.name&#125; <span class="keyword">file</span> upload failed.`);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><p><code>Charts</code>组件<br>因为使用的<code>Charts</code>比较多，所以使用<code>recharts</code>提供的组件<code>ResponsiveContainer</code>为了使得这些<code>Charts</code>不够缩放的影响。但是当前做的这些<code>Charts</code>大部分都是相同的结构，所以相同的部分应该抽离出来。</p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/168079a302463ac0?w=1920&amp;h=1030&amp;f=png&amp;s=255382" alt="WrapperCharts"></p><p>因为其他的<code>Charts</code>都差不多，这里我只说一下<code>LineCharts</code></p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> WrapperCharts <span class="keyword">from</span> <span class="string">'./WrapperCharts'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.scss'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  Line,</span><br><span class="line">  Legend,</span><br><span class="line">  Tooltip,</span><br><span class="line">  XAxis,</span><br><span class="line">  YAxis,</span><br><span class="line">  CartesianGrid,</span><br><span class="line">  LineChart,</span><br><span class="line">  Label,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">"recharts"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> const COLOR_LISTS = [<span class="string">'#8884d8'</span>, <span class="string">'#cf6868'</span>, <span class="string">'#3fb549'</span>, <span class="string">'#a6d41f'</span>, <span class="string">'#8ad4d8'</span>, <span class="string">'#cfdd68'</span>, <span class="string">'#354449'</span>, <span class="string">'#a75d1f'</span>];</span><br><span class="line"></span><br><span class="line">interface LineChartsProps &#123;</span><br><span class="line">  data?: any;</span><br><span class="line">  names?: any;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">LineCharts</span> <span class="keyword">extends</span> <span class="title">Component</span>&lt;<span class="title">LineChartsProps</span>, <span class="title">any</span>&gt; &#123;</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; data, names &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;WrapperCharts class_name=<span class="string">"line-charts"</span>&gt;</span><br><span class="line">        &lt;LineChart data=&#123;data&#125;&gt;</span><br><span class="line">          &lt;CartesianGrid /&gt;</span><br><span class="line">          &#123;</span><br><span class="line">            names &amp;&amp; &lt;XAxis dataKey=&#123;names[<span class="number">0</span>].dataKey&#125; name=&#123;names[<span class="number">0</span>].name&#125; /&gt;</span><br><span class="line">          &#125;</span><br><span class="line">          &lt;YAxis /&gt;</span><br><span class="line">          &lt;Tooltip /&gt;</span><br><span class="line">          &lt;Legend /&gt;</span><br><span class="line">          &#123;</span><br><span class="line">            names &amp;&amp; names.slice(<span class="number">1</span>).map(<span class="function"><span class="params">(item, index)</span> =&gt;</span> (</span><br><span class="line">              &lt;Line type=<span class="string">"monotone"</span> dataKey=&#123;item.dataKey&#125; key=&#123;index&#125; name=&#123;item.name&#125; stroke=&#123;COLOR_LISTS[index]&#125; /&gt;</span><br><span class="line">            ))</span><br><span class="line">          &#125;</span><br><span class="line">          &lt;Label /&gt;</span><br><span class="line">        &lt;/LineChart&gt;</span><br><span class="line">      &lt;/WrapperCharts&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>github page deploy</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="selector-tag">i</span> -g gh-pages</span><br></pre></td></tr></table></figure><p><code>package.json</code>配置<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"predeploy"</span>: <span class="string">"yarn run build"</span>,</span><br><span class="line"><span class="string">"deploy"</span>: <span class="string">"gh-pages -d build"</span></span><br></pre></td></tr></table></figure></p><p>部署<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn <span class="keyword">run</span><span class="bash"> deploy</span></span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/16807bbfbe1471f2?w=735&amp;h=738&amp;f=png&amp;s=78518" alt="Deploy"></p><p>引入图片</p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/16807a01a32d697d?w=1178&amp;h=144&amp;f=png&amp;s=32134" alt="引入图片"></p><p>以上就是这两天做的小东西，写的和讲的都很潦草，请看管轻喷。</p><p><img src="https://user-gold-cdn.xitu.io/2019/1/1/168079f3d99082ae?w=225&amp;h=225&amp;f=jpeg&amp;s=626" alt="溜了溜了"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;转眼间2018年就过去了，来到的2019新的一年，在这里，祝大家新年快乐。&quot;&gt;&lt;a href=&quot;#转眼间2018年就过去了，来到的2019新的一年，在这里，祝大家新年快乐。&quot; class=&quot;headerlink&quot; title=&quot;转眼间2018年就过去了，来到的20
      
    
    </summary>
    
    
      <category term="Antd" scheme="https://rain120.github.io/tags/Antd/"/>
    
      <category term="Recharts" scheme="https://rain120.github.io/tags/Recharts/"/>
    
      <category term="Excel" scheme="https://rain120.github.io/tags/Excel/"/>
    
      <category term="React Github Page部署" scheme="https://rain120.github.io/tags/React-Github-Page%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Vue项目从无到有的部署上Github page</title>
    <link href="https://rain120.github.io/2018/10/19/vue-deploy-githug-page/"/>
    <id>https://rain120.github.io/2018/10/19/vue-deploy-githug-page/</id>
    <published>2018-10-19T15:39:56.000Z</published>
    <updated>2019-02-04T10:33:20.029Z</updated>
    
    <content type="html"><![CDATA[<!-- [知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)[个人博客](https://rain120.github.io/)[Github](https://github.com/Rain120) --><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ul><li>Nodejs安装</li></ul><p><a href="http://nodejs.cn/download/" target="_blank" rel="noopener">Node官网下载</a><br><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668c933cfd5c7e0?w=1559&amp;h=770&amp;f=png&amp;s=121790" alt="下载页面"></p><p>建议安装在非系统盘的英文目录下</p><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668c970dca6d72b?w=428&amp;h=250&amp;f=png&amp;s=14032" alt="查看版本"></p><p><code>Node</code>环境配置</p><p>新建文件夹 — <code>node_cache</code> 和 <code>node_global</code>(<code>npm install -g package-name</code>)</p><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668c9a675e657ba?w=1096&amp;h=478&amp;f=png&amp;s=66982" alt="新建文件夹"></p><p>创建完文件后，需要更改 <code>npmrc</code> 中的 <code>perfix</code> 和 <code>cache</code><br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm<span class="built_in"> config </span><span class="builtin-name">set</span><span class="built_in"> prefix </span><span class="string">"E:\Program Files (x86)\Nodejs\node_global"</span></span><br><span class="line">npm<span class="built_in"> config </span><span class="builtin-name">set</span> cache <span class="string">"E:\Program Files (x86)\Nodejs\node_cache"</span></span><br></pre></td></tr></table></figure></p><p>你需要替换你的安装目录</p><ul><li>Vue-cli安装<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">run</span><span class="bash"> -g vue</span></span><br><span class="line"><span class="bash">vue -V</span></span><br></pre></td></tr></table></figure></li></ul><ol><li>创建<code>Vue</code>项目<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack project-<span class="built_in">name</span></span><br></pre></td></tr></table></figure></li></ol><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668cc57c327240d?w=1217&amp;h=258&amp;f=png&amp;s=37423" alt="初始化项目"></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668cc612eab58e6?w=1142&amp;h=384&amp;f=png&amp;s=57814" alt="初始化项目"></p><ol start="2"><li>修改<code>Vue</code>项目配置</li></ol><p><code>config/index.js</code> –&gt; <code>build</code> –&gt; <code>assetsPublicPath</code> –&gt; <code>/</code> –&gt; <code>./</code></p><p><code>build/webpack.prod.conf.js</code> –&gt; <code>new HtmlWebpackPlugin</code> –&gt; <code>removeAttributeQuotes</code> –&gt; <code>true</code> –&gt; <code>false</code><br><code>.gitignore</code> –&gt; <code>注释/dist/</code><br><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668cd5fd4c5d7c1?w=914&amp;h=817&amp;f=png&amp;s=127782" alt="修改assetsPublicPath"><br><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668cd66b436ccb8?w=949&amp;h=874&amp;f=png&amp;s=178960" alt="修改removeAttributeQuotes"></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668ce98b65284ce?w=745&amp;h=503&amp;f=png&amp;s=48112" alt="修改.gitignore"></p><ol start="3"><li>项目打包<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">run</span><span class="bash"> build</span></span><br></pre></td></tr></table></figure></li></ol><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668ce43810ea0ee?w=1223&amp;h=779&amp;f=png&amp;s=108140" alt="npm run build"></p><ol start="4"><li>项目测试<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在使用http-<span class="keyword">server</span>前，需要安装 npm i -g http-<span class="keyword">server</span></span><br><span class="line">http-<span class="keyword">server</span> ./dist</span><br></pre></td></tr></table></figure></li></ol><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668cd108a5be0e2?w=677&amp;h=153&amp;f=png&amp;s=27830" alt="http-server ./dist"></p><ol start="5"><li>创建<code>Github</code>项目</li></ol><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668ccabedc34a0e?w=1218&amp;h=671&amp;f=png&amp;s=94520" alt="创建Github项目"></p><ol start="6"><li>本地<code>Vue</code>项目<code>Push</code>到<a href="https://github.com" target="_blank" rel="noopener">Github</a>官网<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">    </span><br><span class="line">git <span class="keyword">add</span><span class="bash"> .</span></span><br><span class="line"><span class="bash">    </span></span><br><span class="line"><span class="bash">git commit -m <span class="string">'init vue project'</span></span></span><br><span class="line"><span class="bash">    </span></span><br><span class="line"><span class="bash">git remote add origin git@github.com:Rain120/demo.git </span></span><br><span class="line"><span class="bash">    </span></span><br><span class="line"><span class="bash">git pull origin master --allow-unrelated-histories</span></span><br><span class="line"><span class="bash">    </span></span><br><span class="line"><span class="bash">git push -u origin master</span></span><br></pre></td></tr></table></figure></li></ol><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668ceb04fdd8a9e?w=685&amp;h=50&amp;f=png&amp;s=9575" alt="git init"></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668ced534ba145c?w=1016&amp;h=742&amp;f=png&amp;s=156122" alt="git add ."></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668cee33ad5485a" alt="git commit -m &#39;init vue project&#39;"></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668cf142646bffa?w=835&amp;h=636&amp;f=png&amp;s=91771" alt="git pull &amp;&amp; git push"></p><ol start="7"><li><code>Github Setting</code> – 配置<code>Github page</code></li></ol><p>Settings<br><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668ccb537300271?w=1265&amp;h=567&amp;f=png&amp;s=73363" alt="Settings"><br>Github Pages<br><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668ccba505d40f0?w=1109&amp;h=558&amp;f=png&amp;s=58842" alt="Github Pages"><br>Save Setting<br><img src="https://user-gold-cdn.xitu.io/2018/10/19/1668ccbff2c2c1c2?w=1214&amp;h=680&amp;f=png&amp;s=73071" alt="Save Setting"><br>最后可以在 <code>https://rain120.github.io/demo/dist/</code>，可以看到部署上线的效果（这个仓库我会在演示完后删掉，请自行测试）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- [知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)

[个人博客](https://rain120.github.io/)

[Github](https://github.com/Ra
      
    
    </summary>
    
    
      <category term="编程" scheme="https://rain120.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="Github Pages" scheme="https://rain120.github.io/tags/Github-Pages/"/>
    
      <category term="Vue部署" scheme="https://rain120.github.io/tags/Vue%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Javascript之正则表达式的学习笔记</title>
    <link href="https://rain120.github.io/2018/10/05/javascript-regexp/"/>
    <id>https://rain120.github.io/2018/10/05/javascript-regexp/</id>
    <published>2018-10-05T15:51:50.000Z</published>
    <updated>2018-10-05T16:29:48.772Z</updated>
    
    <content type="html"><![CDATA[<!-- [知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)[个人博客](https://rain120.github.io/)[Github](https://github.com/Rain120)--><p>小白正则表达式入门学习：<a href="http://www.runoob.com/w3cnote/regular-expression-30-minutes-tutorial.html#alternative" target="_blank" rel="noopener">正则表达式30分钟入门教程</a></p><p>正则表达式Regular Expression是一种文本模式。它描述了一种字符串匹配的模式pattern，可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等。<br>我们将正则表达式分为几个部分记下笔记，便于理解与使用。</p><h2 id="1-元字符"><a href="#1-元字符" class="headerlink" title="1. 元字符"></a>1. 元字符</h2><p>我们在 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener">MDN-Regular_Expression</a> 上得知，正则表达式会有一些特殊字符，也叫作元字符。如下表示：</p><table><thead><tr><th style="text-align:center">字符</th><th>含义</th><th style="text-align:center">英语记忆或者个人记忆方法</th></tr></thead><tbody><tr><td style="text-align:center">匹配字符</td><td></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">\b</td><td>匹配一个单词边界，也就是指单词和空格间的位置。一个匹配的词的边界的内容的长度是0。（不要和[\b]混淆了）</td><td style="text-align:center">blank</td></tr><tr><td style="text-align:center">\B</td><td>匹配非单词边界。一个字符串的开始和结尾都被认为不是“字”字符，或者空字符串</td><td style="text-align:center">Blank，b与B相反</td></tr><tr><td style="text-align:center">\d</td><td>匹配一个数字字符。等价于 [0-9]</td><td style="text-align:center">digit</td></tr><tr><td style="text-align:center">\D</td><td>匹配一个非数字字符。等价于 [^0-9]</td><td style="text-align:center">Digit，d与D相反</td></tr><tr><td style="text-align:center">\s</td><td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。</td><td style="text-align:center">space</td></tr><tr><td style="text-align:center">\S</td><td>匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。</td><td style="text-align:center">Space, s与S相反</td></tr><tr><td style="text-align:center">\w</td><td>匹配字母、数字、下划线。等价于’[A-Za-z0-9_]’</td><td style="text-align:center">word</td></tr><tr><td style="text-align:center">\W</td><td>匹配非字母、数字、下划线。等价于 ‘[^A-Za-z0-9_]’</td><td style="text-align:center">Word，w与W相反</td></tr><tr><td style="text-align:center">匹配特殊字符</td><td></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">\t</td><td>匹配一个制表符 (\x09)。</td><td style="text-align:center">Table</td></tr><tr><td style="text-align:center">\n</td><td>匹配一个换行符 (\x09A)。</td><td style="text-align:center">New line</td></tr><tr><td style="text-align:center"><a href="https://en.wikipedia.org/?title=%5Cf&amp;redirect=no" target="_blank" rel="noopener">\f</a></td><td>匹配一个换页符 (\x09C)。</td><td style="text-align:center">Page break#Form feed</td></tr><tr><td style="text-align:center">\v</td><td>匹配一个垂直制表符。等价于 \x0b 和 \cK。</td><td style="text-align:center">Vertical table</td></tr><tr><td style="text-align:center">\r</td><td>匹配一个回车符 (\x09D)。</td><td style="text-align:center">Return</td></tr><tr><td style="text-align:center">\</td><td>将下一个字符标记为一个特殊字符、或一个原义字符、或一个 向后引用、或一个八进制转义符。</td><td style="text-align:center">反斜杠也可以将其后的特殊字符，转义为字面量,当需要使用<code>\</code>时也需要将其转义</td></tr><tr><td style="text-align:center">x &VerticalLine; y</td><td>匹配 x 或 y</td><td style="text-align:center">或运算</td></tr><tr><td style="text-align:center">^</td><td>匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 ‘\n’ 或 ‘\r’ 之后的位置</td><td style="text-align:center">开始</td></tr><tr><td style="text-align:center">$</td><td>匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 ‘\n’ 或 ‘\r’ 之前的位置</td><td style="text-align:center">结束</td></tr><tr><td style="text-align:center">匹配内容次数</td><td></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">*</td><td>匹配前面的子表达式零次或多次</td><td style="text-align:center">`{0, n}</td></tr><tr><td style="text-align:center">+</td><td>匹配前面的子表达式一次或多次</td><td style="text-align:center">{1, n}</td></tr><tr><td style="text-align:center">?</td><td>匹配前面的子表达式零次或一次</td><td style="text-align:center">{0, 1}</td></tr><tr><td style="text-align:center">匹配分组</td><td></td></tr><tr><td style="text-align:center">(pattern)</td><td>匹配 <code>pattern</code> 并获取这一匹配。所获取的匹配可以从产生的 <code>Matches</code> 集合得到，<code>JS</code>使用 <code>$0…$9</code> 属性获取匹配结果</td><td style="text-align:center">匹配括号内部的正则表达式结果</td></tr><tr><td style="text-align:center">[xy]</td><td>字符集合,匹配所包含的任意一个字符</td><td style="text-align:center">匹配[]内部的内容,即<code>x</code> <code>y</code></td></tr><tr><td style="text-align:center">[^xy]</td><td>字符集合,匹配所包含的任意一个字符</td><td style="text-align:center">匹配[]内部的内容,即不是<code>x</code> <code>y</code>的任意一个字符</td></tr><tr><td style="text-align:center">[a-z]</td><td>字符集合,匹配所包含的任意一个字符</td><td style="text-align:center">匹配[]内部的内容,即<code>a-z</code>之间任意一个字符</td></tr><tr><td style="text-align:center">[^a-z]</td><td>负值字符范围。匹配任何不在指定范围内的任意字符</td><td style="text-align:center">匹配[]内部的内容,即不是<code>a-z</code>之间任意一个字符</td></tr><tr><td style="text-align:center">{n}</td><td><code>n</code> 是一个非负整数。匹配确定的 <code>n</code> 次</td><td style="text-align:center">匹配连续出现<code>n</code>次的字符</td></tr><tr><td style="text-align:center">{n,}</td><td><code>n</code> 是一个非负整数。至少匹配<code>n</code> 次</td><td style="text-align:center">匹配至少出现<code>n</code>次的字符</td></tr><tr><td style="text-align:center">{n,m}</td><td><code>m</code> 和 <code>n</code> 均为非负整数，其中<code>n</code> &lt;= <code>m</code>。最少匹配 <code>n</code> 次且最多匹配 <code>m</code> 次</td><td style="text-align:center">匹配出现 <code>[n, m]</code>次字符</td></tr></tbody></table><ul><li>优先级：正则表达式从左到右进行计算，并遵循优先级顺序</li></ul><p>下面我们讲上述元字符一个一个的测试.</p><p><span id="test">不过</span>，在测试之前，我们先了解两个<a href="#func">正则表达式的方法</a>，<a href="#test">test()</a> 和 <a href="#exec">exec()</a>。</p><p>元字符<code>\b</code>与<code>\B</code></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/5/16644a8f7aaafa76?w=821&amp;h=206&amp;f=png&amp;s=15918" alt="test \b \B"></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/5/16644aa835ec67a8?w=782&amp;h=219&amp;f=png&amp;s=16767" alt="test \b \B"></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/5/16644b5a0a5e99a5?w=933&amp;h=669&amp;f=png&amp;s=68214" alt=""><br>从上面结果得知，b匹配的是单词的边界，B匹配的是非单词的边界</p><p>元字符<code>\d</code>与<code>\D</code><br><img src="https://user-gold-cdn.xitu.io/2018/10/5/16644a2d8c255270?w=767&amp;h=228&amp;f=png&amp;s=20984" alt="test \d \D"></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/5/16644b18e0171863?w=930&amp;h=359&amp;f=png&amp;s=40734" alt=""></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/5/16644a4edb138309?w=794&amp;h=205&amp;f=png&amp;s=16320" alt="test \d \D"></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/5/16644b23db11f7ea?w=914&amp;h=327&amp;f=png&amp;s=32021" alt=""><br>元字符<code>\s</code>与<code>\S</code></p><p>元字符<code>\w</code>与<code>\W</code></p><h2 id="2-参数"><a href="#2-参数" class="headerlink" title="2. 参数"></a>2. 参数</h2><table><thead><tr><th style="text-align:center">参数列表</th><th>含义</th><th style="text-align:center">英语记忆或者个人记忆方法</th></tr></thead><tbody><tr><td style="text-align:center">i</td><td>忽略大小写</td><td style="text-align:center">ignoreCase</td></tr><tr><td style="text-align:center">g</td><td>全文查找出现的所有匹配字符</td><td style="text-align:center">global</td></tr><tr><td style="text-align:center">m</td><td>多行查找</td><td style="text-align:center">multiline</td></tr><tr><td style="text-align:center">y</td><td>执行“粘性”搜索,匹配从目标字符串的当前位置开始，可以使用y标志</td><td style="text-align:center">sticky</td></tr></tbody></table><p>当然，上面这几种匹配规则可以结合使用，例如<code>/ig</code>或者<code>/gi</code>都是全文查找、忽略大小写</p><h2 id="3-方法"><a href="#3-方法" class="headerlink" title="3. 方法"></a><span id="func">3. 方法</span></h2><table><thead><tr><th style="text-align:center">方法</th><th>含义</th><th style="text-align:center">匹配返回值</th><th style="text-align:center">未匹配返回值</th></tr></thead><tbody><tr><td style="text-align:center"><a href="#test">test()</a></td><td>测试是否匹配的RegExp方法</td><td style="text-align:center">true</td><td style="text-align:center">false</td></tr><tr><td style="text-align:center"><a href="#exec">exec()</a></td><td>执行查找匹配的RegExp方法</td><td style="text-align:center">数组</td><td style="text-align:center">null</td></tr><tr><td style="text-align:center"><a href="#match">match(pattern)</a></td><td>执行查找匹配的String方法</td><td style="text-align:center">数组</td><td style="text-align:center">null </td></tr><tr><td style="text-align:center"><a href="#search">search(pattern)</a></td><td>测试匹配的String方法</td><td style="text-align:center">返回匹配到的位置索引</td><td style="text-align:center">-1</td></tr><tr><td style="text-align:center"><a href="#replace">replace(pattern, obj &VerticalLine;&VerticalLine; callback)</a></td><td>执行查找匹配的String方法，并且使用替换字符串替换掉匹配到的子字符串</td><td style="text-align:center">一个新的字符串</td><td style="text-align:center">null</td></tr><tr><td style="text-align:center"><a href="#split">split</a></td><td>一个使用正则表达式或者一个固定字符串分隔一个字符串，并将分隔后的子字符串存储到数组中的String方法</td><td style="text-align:center">返回一个数组</td><td style="text-align:center">null</td></tr></tbody></table><p>下面我们讲上述方法一个一个的详细介绍。</p><h3 id="test-str"><a href="#test-str" class="headerlink" title="test(str)"></a><span id="test">test(str)</span></h3><h4 id="param：str"><a href="#param：str" class="headerlink" title="param：str"></a>param：<code>str</code></h4><h4 id="result"><a href="#result" class="headerlink" title="result:"></a>result:</h4><p><code>匹配成功：</code> 如果正则表达式与指定的字符串匹配 ，返回true</p><p><code>匹配失败：</code> false</p><p><img src="https://user-gold-cdn.xitu.io/2018/10/6/1664509b8840fba4?w=927&amp;h=210&amp;f=png&amp;s=18999" alt="test test()"></p><h3 id="exec-str"><a href="#exec-str" class="headerlink" title="exec(str)"></a><span id="exec">exec(str)</span></h3><h4 id="param：str-1"><a href="#param：str-1" class="headerlink" title="param：str"></a>param：<code>str</code></h4><h4 id="result-1"><a href="#result-1" class="headerlink" title="result:"></a>result:</h4><p><code>匹配成功：</code> exec() 方法返回一个数组，并更新正则表达式对象的属性。返回的数组将完全匹配成功的文本作为第一项，将正则括号里匹配成功的作为数组填充到后面。</p><p><code>匹配失败：</code> 如果匹配失败，exec() 方法返回 null。</p><table><thead><tr><th style="text-align:center">对象</th><th style="text-align:center">属性/索引</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">result</td><td style="text-align:center">[0]</td><td>匹配的全部字符串</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">[1], …[n]</td><td>括号中的分组捕获</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">index</td><td>匹配到的字符位于原始字符串的基于0的索引值</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">input</td><td>原始字符串</td></tr><tr><td style="text-align:center">regexp</td><td style="text-align:center">lastIndex</td><td>下一次匹配开始的位置</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">ignoreCase</td><td>是否使用了 “i” 标记使正则匹配忽略大小写</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">global</td><td>是否使用了 “g” 标记来进行全局的匹配    true</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">multiline</td><td>是否使用了 “m” 标记使正则工作在多行模式（也就是，^ 和 $ 可以匹配字符串中每一行的开始和结束（行是由 \n 或 \r 分割的），而不只是整个输入字符串的最开始和最末尾处。）</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">source</td><td>正则匹配的字符串</td></tr></tbody></table><p><img src="https://user-gold-cdn.xitu.io/2018/10/5/16644e4e90587f45?w=930&amp;h=219&amp;f=png&amp;s=23273" alt="test exec()"></p><p><a href="#test">Back to test char</a></p><h3 id="match-pattern"><a href="#match-pattern" class="headerlink" title="match(pattern)"></a><span id="match">match(pattern)</span></h3><h3 id="search-pattern"><a href="#search-pattern" class="headerlink" title="search(pattern)"></a><span id="search">search(pattern)</span></h3><h3 id="replace-pattern-obj-VerticalLine-VerticalLine-callback"><a href="#replace-pattern-obj-VerticalLine-VerticalLine-callback" class="headerlink" title="replace(pattern, obj &VerticalLine;&VerticalLine; callback)"></a><span id="replace">replace(pattern, obj &VerticalLine;&VerticalLine; callback)</span></h3><h3 id="split"><a href="#split" class="headerlink" title="split"></a><span id="split">split</span></h3><p>未完待续ing</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 
[知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)

[个人博客](https://rain120.github.io/)

[Github](https://github.com/R
      
    
    </summary>
    
    
      <category term="前端学习" scheme="https://rain120.github.io/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaScript" scheme="https://rain120.github.io/tags/JavaScript/"/>
    
      <category term="正则表达式" scheme="https://rain120.github.io/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
      <category term="学习笔记" scheme="https://rain120.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>前端面试之你可能会遇到的编程题(1)</title>
    <link href="https://rain120.github.io/2018/08/21/Interview-programming-01/"/>
    <id>https://rain120.github.io/2018/08/21/Interview-programming-01/</id>
    <published>2018-08-21T14:13:21.000Z</published>
    <updated>2018-08-21T15:19:36.358Z</updated>
    
    <content type="html"><![CDATA[<!-- [知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)[个人博客](https://rain120.github.io/)[Github](https://github.com/Rain120)--><p>“开源（<code>open source</code>）”这个词，指的是事物规划为可以公开访问的，因此人们可以修改并分享。</p><p>作为一个从大型同性社交网站<a href="https://github.com/Rain120" target="_blank" rel="noopener">GitHub / Rain120</a>上学习成长的一个前端菜鸟的我，深受大佬的感染，也希望有机会能够给同样是菜鸟的你们提供帮助，在我学习之余，留下了之前学习遇到的、网上看到的、笔试面试遇到的一些编程的解法，还请各位大佬手下留情，多多提携、指点我等菜鸟。</p><p>欢迎各位大佬留下更加简单的写法，谢谢！！</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e6993e7235?w=300&amp;h=300&amp;f=jpeg&amp;s=15413" alt="抱大腿"></p><p>代码仓库: <a href="https://github.com/Rain120/Web-Study" target="_blank" rel="noopener">Web-Study</a></p><p>废话不多说，先上题吧。</p><h4 id="1、关系型数组转换成树形结构对象-拼多多2018前端笔试真题-依图面试"><a href="#1、关系型数组转换成树形结构对象-拼多多2018前端笔试真题-依图面试" class="headerlink" title="1、关系型数组转换成树形结构对象(拼多多2018前端笔试真题 / 依图面试)"></a>1、关系型数组转换成树形结构对象(拼多多2018前端笔试真题 / 依图面试)</h4><p>关系型数组<br><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = [</span><br><span class="line">    &#123; <span class="attribute">id:</span><span class="string">3, parent</span>:<span class="number">2</span> &#125;,</span><br><span class="line">    &#123; <span class="attribute">id:</span><span class="string">1, parent</span>:<span class="literal">null</span> &#125;,</span><br><span class="line">    &#123; <span class="attribute">id:</span><span class="string">2, parent</span>:<span class="number">1</span> &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>期望结果：<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">o</span> <span class="string">=</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">  obj:</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">    id:</span> <span class="number">1</span><span class="string">,</span></span><br><span class="line"><span class="attr">    parent:</span> <span class="literal">null</span><span class="string">,</span></span><br><span class="line"><span class="attr">    child:</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">      id:</span> <span class="number">2</span><span class="string">,</span></span><br><span class="line"><span class="attr">      parent:</span> <span class="number">1</span><span class="string">,</span></span><br><span class="line"><span class="attr">      child:</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">          id:</span> <span class="string">,3,</span></span><br><span class="line"><span class="attr">          parent:</span> <span class="number">2</span></span><br><span class="line">      <span class="string">&#125;</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">  <span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></p><p>思路：</p><p>先找到它的根元素，根据<code>id</code>和<code>parent</code>来判断它们之间的关系</p><p>实现源码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">treeObj</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  obj.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item.parent !== <span class="literal">null</span>) &#123;</span><br><span class="line">      obj.map(<span class="function"><span class="params">o</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.parent === o.id) &#123;</span><br><span class="line">          <span class="keyword">if</span> (!o.child) &#123;</span><br><span class="line">            o.child = [];</span><br><span class="line">          &#125;</span><br><span class="line">          o.child.push(item);</span><br><span class="line">          o.child = o.child;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> obj.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.parent === <span class="literal">null</span>)[<span class="number">0</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>解法2：(知乎评论区提供的方法)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">treeObj</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b.parent - a.parent)</span><br><span class="line">      .reduce(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> (acc ? &#123; ...cur, <span class="attr">child</span>: acc &#125; : cur));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>实现效果：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e698c0a812?w=562&amp;h=303&amp;f=jpeg&amp;s=17534" alt="第一题实现效果"></p><h4 id="2、请用-javascript-实现一个函数-parseUrl-url-，将一段-url字符串解析为-Object。-西洋汇笔试"><a href="#2、请用-javascript-实现一个函数-parseUrl-url-，将一段-url字符串解析为-Object。-西洋汇笔试" class="headerlink" title="2、请用 javascript 实现一个函数 parseUrl(url)，将一段 url字符串解析为 Object。(西洋汇笔试)"></a>2、请用 javascript 实现一个函数 parseUrl(url)，将一段 url字符串解析为 Object。(西洋汇笔试)</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parseUrl(<span class="string">"http://www.xiyanghui.com/product/list?id=123456&amp;sort=discount#title"</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>期望结果：<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="symbol">    protocol:</span> <span class="string">"http"</span>,</span><br><span class="line"><span class="symbol">    host:</span> <span class="string">"www.xiyanghui.com"</span>,</span><br><span class="line"><span class="symbol">    path:</span> <span class="string">"/product/list"</span>,</span><br><span class="line"><span class="symbol">    params:</span> &#123;</span><br><span class="line"><span class="symbol">        id:</span> <span class="string">"12345"</span>,</span><br><span class="line"><span class="symbol">        sort:</span> <span class="string">"discount"</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="symbol">    hash:</span> <span class="string">"title"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>思路：</p><p>首先我们需要了解一下<code>URL</code>这个概念。</p><p><a href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6" target="_blank" rel="noopener">URL(统一资源定位符)</a>（或称统一资源定位器/定位地址、<code>URL</code>地址等，英语：<code>Uniform Resource Locator</code>，常缩写为<code>URL</code>），有时也被俗称为网页地址（网址）。</p><p>这里，我补充一点，各位不仅需要了解 <code>URL</code>，还需要了解 <code>URI</code>。</p><p><a href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E6%A0%87%E5%BF%97%E7%AC%A6" target="_blank" rel="noopener">URI</a>：统一资源标识符（英语：<code>Uniform Resource Identifier</code>，或<code>URI</code>）是一个用于标识某一互联网资源名称的字符串。 该种标识允许用户对网络中（一般指万维网）的资源通过特定的协议进行交互操作。<code>URI</code>的最常见的形式是统一资源定位符（<code>URL</code>），经常指定为非正式的网址。更罕见的用法是统一资源名称（<code>URN</code>），其目的是通过提供一种途径。用于在特定的名字空间资源的标识，以补充网址。</p><p><a href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E6%A0%87%E5%BF%97%E7%AC%A6" target="_blank" rel="noopener">URI</a>包括了<a href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6" target="_blank" rel="noopener">URL</a>和<a href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%90%8D%E7%A7%B0" target="_blank" rel="noopener">URN</a>。<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e6999203fb?w=237&amp;h=335&amp;f=jpeg&amp;s=21851" alt="URI"></p><p>下图展示了两个 URI 例子及它们的组成部分。<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e6992c2c7a?w=720&amp;h=228&amp;f=jpeg&amp;s=19352" alt="URI 例子及它们的组成部分"></p><p><code>URL</code>一般包括<code>协议</code>、<code>域名</code>、<code>端口</code>、<code>query</code>、<code>params</code>等，我们在传入参数时是字符串，我们需要将它转换成<code>URL</code>，可以通过创建一个<code>a</code>标签来将字符串 转换成<code>URL</code> 。</p><p>实现源码：<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseUrl</span>(<span class="params">url</span>) </span>&#123;   </span><br><span class="line">     <span class="keyword">var</span> a =  <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);   </span><br><span class="line">     a.href = url;   </span><br><span class="line">     <span class="keyword">return</span> &#123;   </span><br><span class="line">         source: url,   </span><br><span class="line">         protocol: a.protocol.replace(<span class="string">':'</span>,<span class="string">''</span>),   </span><br><span class="line">         host: a.hostname,   </span><br><span class="line">         port: a.port,   </span><br><span class="line">         query: a.search,   </span><br><span class="line">         params: <span class="function">(<span class="params">(<span class="params"></span>) =&gt; &#123;   </span></span></span><br><span class="line"><span class="function"><span class="params">             <span class="keyword">var</span> ret = &#123;&#125;, querys = []; </span></span></span><br><span class="line"><span class="function"><span class="params">             <span class="keyword">var</span> searchQuery = a.search.replace(<span class="params">/^\?/,''</span>).split(<span class="params">'&amp;'</span>);</span></span></span><br><span class="line"><span class="function"><span class="params">             <span class="keyword">for</span> (<span class="params"> <span class="keyword">var</span> i = 0;i &lt; searchQuery.length; i++</span>) &#123;   </span></span></span><br><span class="line"><span class="function"><span class="params">                 <span class="keyword">if</span> (<span class="params">searchQuery[i]</span>) &#123; </span></span></span><br><span class="line"><span class="function"><span class="params">                 querys = searchQuery[i].split(<span class="params">'='</span>);   </span></span></span><br><span class="line"><span class="function"><span class="params">                 ret[querys[0]] = querys[1]; </span></span></span><br><span class="line"><span class="function"><span class="params">                 &#125;  </span></span></span><br><span class="line"><span class="function"><span class="params">             &#125;   </span></span></span><br><span class="line"><span class="function"><span class="params">             <span class="keyword">return</span> ret;   </span></span></span><br><span class="line"><span class="function"><span class="params">         &#125;</span>)<span class="params">()</span>,  </span></span><br><span class="line"><span class="function">         <span class="params">file</span>: (<span class="params">a.pathname.match(<span class="params">/\/(<span class="params">[^\/?#]+</span>)$/i</span>) || [,'']</span>)[1],   </span></span><br><span class="line"><span class="function">         <span class="params">hash</span>: <span class="params">a</span>.<span class="params">hash</span>.<span class="params">replace</span>(<span class="params">'#',''</span>),   </span></span><br><span class="line"><span class="function">         <span class="params">path</span>: <span class="params">a</span>.<span class="params">pathname</span>.<span class="params">replace</span>(<span class="params">/^(<span class="params">[^\/]</span>)/,'/$1'</span>),   </span></span><br><span class="line"><span class="function">         <span class="params">relative</span>: (<span class="params">a.href.match(<span class="params">/tps?:\/\/[^\/]+(<span class="params">.+</span>)/</span>) || [,'']</span>)[1],   </span></span><br><span class="line"><span class="function">         <span class="params">segments</span>: <span class="params">a</span>.<span class="params">pathname</span>.<span class="params">replace</span>(<span class="params">/^\<span class="comment">//,'').split('/')   </span></span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;;   </span></span></span><br><span class="line"><span class="function"><span class="params">&#125; </span></span></span><br><span class="line"><span class="function"><span class="params">parseUrl(<span class="params">"http:<span class="comment">//www.xiyanghui.com/product/list?id=123456&amp;sort=discount#title");</span></span></span></span></span><br></pre></td></tr></table></figure></p><p>实现效果：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e6998a8213?w=691&amp;h=643&amp;f=jpeg&amp;s=82241" alt="第二题实现效果："></p><h4 id="3、数组元素的排列组合问题"><a href="#3、数组元素的排列组合问题" class="headerlink" title="3、数组元素的排列组合问题"></a>3、数组元素的排列组合问题</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><p>期望结果：</p><p>全排列：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e699970f24?w=33&amp;h=31&amp;f=jpeg&amp;s=558" alt="全排列"><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>, <span class="number">1</span>], [<span class="number">3</span>, <span class="number">2</span>]]</span><br></pre></td></tr></table></figure></p><p>思路：</p><p>每次取数组中的一个数，然后将剩余的数，依次加入到该数的组合数组中<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e6f3feaffc?w=559&amp;h=633&amp;f=jpeg&amp;s=56460" alt="全排列思路"></p><p>实现代码：<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Permutations</span> </span>(target, size, origin) &#123;</span><br><span class="line">    <span class="keyword">var</span> _arr = []</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getArrange</span></span>(target, nums, ret) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; target.length; i++) &#123;</span><br><span class="line">                <span class="keyword">var</span> tmp = ret.slice();</span><br><span class="line">                tmp.push(target[i]);</span><br><span class="line">                _arr.push(tmp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nums -= <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; target.length; i++) &#123;</span><br><span class="line">                <span class="keyword">var</span> tmp = ret.slice();</span><br><span class="line">                <span class="keyword">var</span> <span class="keyword">new</span><span class="type">Target</span> = target.slice();</span><br><span class="line">                tmp.push(target[i]);</span><br><span class="line">                <span class="keyword">new</span><span class="type">Target</span>.splice(i, <span class="number">1</span>);</span><br><span class="line">                getArrange(<span class="keyword">new</span><span class="type">Target</span>, nums, tmp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    getArrange(target, size, origin);</span><br><span class="line">    <span class="keyword">return</span> _arr;</span><br><span class="line">&#125;</span><br><span class="line">Permutations([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>, [])</span><br></pre></td></tr></table></figure></p><p>实现效果：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e6f718cb5f?w=577&amp;h=504&amp;f=jpeg&amp;s=41448" alt="全排列实现效果"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure><p>排列组合：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e6f40e1f26?w=27&amp;h=28&amp;f=jpeg&amp;s=541" alt="排列组合"><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</span><br></pre></td></tr></table></figure></p><p>思路：</p><p>取一个数，加入到数组中，接着再取一个数加入数组，直到需要的num为0。<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e6f519ae56?w=575&amp;h=544&amp;f=jpeg&amp;s=51995" alt="排列组合思路"></p><p>实现代码：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Permutations</span> <span class="params">(arr, nums)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ret = [];</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getRet</span><span class="params">(origin, target, nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums === <span class="number">0</span>) &#123;</span><br><span class="line">      ret[ret.length] = origin;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= target.length - nums; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> tmp = origin.slice();</span><br><span class="line">      tmp.push(target[i]);</span><br><span class="line">      getRet(tmp, target.slice(i + <span class="number">1</span>), nums - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  getRet([], arr, nums);</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line">Permutations([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">3</span>)</span><br></pre></td></tr></table></figure></p><p>实现效果：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e6f28cc527?w=430&amp;h=386&amp;f=jpeg&amp;s=29323" alt="第三题实现效果"></p><h4 id="4、JS如何判断一组数字是否连续-百词斩笔试题"><a href="#4、JS如何判断一组数字是否连续-百词斩笔试题" class="headerlink" title="4、JS如何判断一组数字是否连续(百词斩笔试题)"></a>4、JS如何判断一组数字是否连续(百词斩笔试题)</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当出现连续数字的时候以‘-’输出</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure><p>期望结果：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"1-4"</span>, <span class="number">6</span>, <span class="string">"8-10"</span>]</span><br></pre></td></tr></table></figure></p><p>原理：</p><p>判断前后数字是否相差为1，如果是则加入同一个数组</p><p>实现代码：</p><p>判断是否连续：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrange = <span class="function"><span class="keyword">function</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = [],temp = [];</span><br><span class="line">    arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">source, dest</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> source - dest;</span><br><span class="line">    &#125;).concat(<span class="literal">Infinity</span>).reduce(<span class="function"><span class="keyword">function</span>(<span class="params">source, dest</span>)</span>&#123;</span><br><span class="line">        temp.push(source);</span><br><span class="line">        <span class="keyword">if</span>(dest-source &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            result.push(temp);</span><br><span class="line">            temp = [];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dest;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>实现效果：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e70805ec45?w=564&amp;h=393&amp;f=jpeg&amp;s=29585" alt="判断是否连续实现效果"></p><p>格式化实现：<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> formatarr = <span class="function"><span class="keyword">function</span></span>(arr) &#123;</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">new</span><span class="type">Arr</span> = []</span><br><span class="line"><span class="keyword">var</span> arr1 = arrange(arr)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> arr1) &#123;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">if</span> (arr1[i].length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">str = arr1[i][<span class="number">0</span>] + <span class="string">'-'</span> + arr1[i][arr1[i].length - <span class="number">1</span>];</span><br><span class="line"><span class="keyword">new</span><span class="type">Arr</span>.push(str)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">new</span><span class="type">Arr</span>.push(arr1[i][<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span><span class="type">Arr</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>实现效果：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e707faa3e5?w=613&amp;h=478&amp;f=jpeg&amp;s=38482" alt="第四题实现效果"></p><h4 id="5、创建子类Child，使用原型和构造函数的方式继承父类People的方法，并调用say函数说出姓名和年龄。-详见我的另一篇文章前端面试问题之面向对象类"><a href="#5、创建子类Child，使用原型和构造函数的方式继承父类People的方法，并调用say函数说出姓名和年龄。-详见我的另一篇文章前端面试问题之面向对象类" class="headerlink" title="5、创建子类Child，使用原型和构造函数的方式继承父类People的方法，并调用say函数说出姓名和年龄。(详见我的另一篇文章前端面试问题之面向对象类)"></a>5、创建子类Child，使用原型和构造函数的方式继承父类People的方法，并调用say函数说出姓名和年龄。(详见我的另一篇文章<a href="https://zhuanlan.zhihu.com/p/34203178" target="_blank" rel="noopener">前端面试问题之面向对象类</a>)</h4><p>实现代码：</p><p>父类：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">People</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">     <span class="keyword">this</span>.name=name;</span><br><span class="line">     <span class="keyword">this</span>.age=age;</span><br><span class="line">     <span class="keyword">this</span>.say=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">"我的名字是:"</span>+<span class="keyword">this</span>.name+<span class="string">"我今年"</span>+<span class="keyword">this</span>.age+<span class="string">"岁！"</span>);</span><br><span class="line">     &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>原型继承：(原型链相关问题请看我的另一篇文章<a href="https://zhuanlan.zhihu.com/p/34640855" target="_blank" rel="noopener">前端面试之原型链问题</a>)<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span></span>(name, age)&#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = <span class="keyword">new</span> <span class="type">People</span>();</span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> <span class="type">Child</span>(<span class="string">'Rainy'</span>, <span class="number">20</span>);</span><br><span class="line">child.say()</span><br></pre></td></tr></table></figure></p><p>实现效果：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e70f89d4ab?w=588&amp;h=239&amp;f=jpeg&amp;s=21751" alt="原型继承"></p><p>构造函数继承<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span><span class="params">(name, age)</span></span>&#123;</span><br><span class="line">People.call(<span class="keyword">this</span>)</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line"><span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> Child(<span class="string">'Rainy'</span>, <span class="number">20</span>);</span><br><span class="line">child.say()</span><br></pre></td></tr></table></figure></p><p>实现效果:<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e7236cbfd3?w=667&amp;h=250&amp;f=jpeg&amp;s=22363" alt="构造函数继承"></p><p>组合继承：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span><span class="params">(name, age)</span></span>&#123;</span><br><span class="line">People.call(<span class="keyword">this</span>);</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line"><span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = People.prototype;</span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> Child(<span class="string">'Rainy'</span>, <span class="number">20</span>);</span><br><span class="line">child.say()</span><br></pre></td></tr></table></figure></p><p>实现效果：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e7180791ff?w=666&amp;h=258&amp;f=jpeg&amp;s=25063" alt="组合继承"></p><p>组合继承优化：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">People.call(<span class="keyword">this</span>);</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line"><span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = <span class="built_in">Object</span>.create(People.prototype);</span><br><span class="line">Child.prototype.constructor = Child;</span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> Child(<span class="string">'Rainy'</span>, <span class="number">20</span>);</span><br><span class="line">child.say()</span><br></pre></td></tr></table></figure></p><p>实现效果：<br><img src="https://user-gold-cdn.xitu.io/2018/8/21/1655d0e70ef3f266?w=682&amp;h=277&amp;f=jpeg&amp;s=27045" alt="组合继承优化"></p><p>未完待续</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 
[知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)

[个人博客](https://rain120.github.io/)

[Github](https://github.com/R
      
    
    </summary>
    
    
      <category term="前端笔试、面试题" scheme="https://rain120.github.io/tags/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AF%95%E3%80%81%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
      <category term="编程" scheme="https://rain120.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Vue实现左右菜单联动实现</title>
    <link href="https://rain120.github.io/2018/08/11/cascade-menu/"/>
    <id>https://rain120.github.io/2018/08/11/cascade-menu/</id>
    <published>2018-08-11T08:31:34.000Z</published>
    <updated>2018-08-12T07:34:25.831Z</updated>
    
    <content type="html"><![CDATA[<!-- [知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)[个人博客](https://rain120.github.io/)[Github](https://github.com/Rain120)--><p>源码传送门：<a href="https://github.com/Rain120/vue-study/blob/master/my-project/src/components/cascad-menu.vue" target="_blank" rel="noopener">Rain120/vue-study</a></p><h3 id="根据掘金评论需求，更新了数据接口并修复了一些问题"><a href="#根据掘金评论需求，更新了数据接口并修复了一些问题" class="headerlink" title="根据掘金评论需求，更新了数据接口并修复了一些问题"></a>根据<a href="https://juejin.im/post/5b6ea54cf265da0f6436f77a#comment" target="_blank" rel="noopener">掘金评论</a>需求，更新了数据接口并修复了一些问题</h3><p>之前在外卖软件上看到这个左右联动的效果，觉得很有意思，所以就尝试使用<code>Vue</code>来实现，将这个联动抽离成为一个单独的组件，废话少说，先来一张效果图。</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/12/1652d0e19f3f06d4?w=485&amp;h=746&amp;f=gif&amp;s=320229" alt="Vue实现左右菜单联动效果图"></p><p>这个组件分为两个部分，1、左菜单；2、右菜单。</p><p>动态数据结构<br><img src="https://user-gold-cdn.xitu.io/2018/8/12/1652d0b0b010a260?w=720&amp;h=363&amp;f=jpeg&amp;s=21450" alt="动态数据结构"><br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">menus</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attribute">name</span>: <span class="string">'菜单1'</span>,</span><br><span class="line">    <span class="attribute">data</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attribute">name</span>: <span class="string">'1.1'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attribute">name</span>: <span class="string">'1.2'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attribute">name</span>: <span class="string">'1.3'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attribute">name</span>: <span class="string">'1.4'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attribute">name</span>: <span class="string">'1.5'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attribute">name</span>: <span class="string">'1.6'</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>data数据是用户自定义增加一些内容，并渲染<code>DOM</code></p><p>左菜单的<code>DOM</code>结构<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;scroll</span><br><span class="line">  <span class="keyword">class</span>=<span class="string">"left-menu"</span></span><br><span class="line">  :data=<span class="string">"menus"</span></span><br><span class="line">  <span class="keyword">ref</span>=<span class="string">"leftMenu"</span>&gt;</span><br><span class="line">  &lt;div <span class="keyword">class</span>=<span class="string">"left-menu-container"</span>&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li</span><br><span class="line">        <span class="keyword">class</span>=<span class="string">"left-item"</span></span><br><span class="line">        <span class="keyword">ref</span>=<span class="string">"leftItem"</span></span><br><span class="line">        :<span class="keyword">class</span>=<span class="string">"&#123;'current': currentIndex === index&#125;"</span></span><br><span class="line">        @click=<span class="string">"selectLeft(index, $event)"</span></span><br><span class="line">        v-<span class="keyword">for</span>=<span class="string">"(menu, index) in menus"</span></span><br><span class="line">        :key=<span class="string">"index"</span>&gt;</span><br><span class="line">        &lt;p <span class="keyword">class</span>=<span class="string">"text"</span>&gt;&#123;&#123;menu.name&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/scroll&gt;</span><br></pre></td></tr></table></figure></p><p>右菜单的<code>DOM</code>结构</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;scroll</span><br><span class="line">  <span class="built_in">class</span>=<span class="string">"right-menu"</span></span><br><span class="line">  :data=<span class="string">"menus"</span> </span><br><span class="line">  <span class="keyword">ref</span>=<span class="string">"rightMenu"</span></span><br><span class="line">  @scroll=<span class="string">"scrollHeight"</span></span><br><span class="line">  :listenScroll=<span class="string">"true"</span></span><br><span class="line">  :probeType=<span class="string">"3"</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">"right-menu-container"</span>&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li <span class="built_in">class</span>=<span class="string">"right-item"</span> <span class="keyword">ref</span>=<span class="string">"rightItem"</span> v-<span class="keyword">for</span>=<span class="string">"(menu, i) in menus"</span> :key=<span class="string">"i"</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">"title"</span>&gt;&#123;&#123;menu.<span class="built_in">name</span>&#125;&#125;&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-<span class="keyword">for</span>=<span class="string">"(item, j) in menu.data"</span> :key=<span class="string">"j"</span>&gt;</span><br><span class="line">            &lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">"data-wrapper"</span>&gt;</span><br><span class="line">              &lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">"data"</span>&gt;&#123;&#123;<span class="built_in">item</span>.<span class="built_in">name</span>&#125;&#125;&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">            &lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">&lt;/scroll&gt;</span><br></pre></td></tr></table></figure><p>这里是为了做<code>demo</code>，所以在数据上只是单纯捏造。</p><p>当然因为这是个子组件，我们将通过父组件传递<code>props</code>，所以定义<code>props</code><br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">    menus: &#123;</span><br><span class="line">      required: <span class="literal">true</span>,</span><br><span class="line">      type: Array,</span><br><span class="line">     <span class="built_in"> default </span>() &#123;</span><br><span class="line">        return []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/8/11/1652835acc7225ae?w=720&amp;h=724&amp;f=jpeg&amp;s=30681" alt="原理图"></p><p>在这个业务场景中，我们的实现方式是根据右边菜单滚动的高度来计算左边菜单的位置，当然左边菜单也可以通过点击来确定右边菜单需要滚动多高的距离，那么我们如何获得该容器滚动的距离呢？<br>之前一直在使用<a href="https://ustbhuangyi.github.io/better-scroll/doc/zh-hans/" target="_blank" rel="noopener">better-scroll</a>，通过阅读文档，我们知道它有有<code>scroll</code>事件，我们可以通过监听这个事件来获取滚动的<code>pos</code><br><img src="https://user-gold-cdn.xitu.io/2018/8/11/1652835acc5580bc?w=665&amp;h=205&amp;f=jpeg&amp;s=13597" alt="scroll事件"><br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.listenScroll) &#123;</span><br><span class="line">  let me = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">this</span>.scroll.<span class="literal">on</span>(<span class="string">'scroll'</span>, <span class="function"><span class="params">(pos)</span> =&gt;</span> &#123;</span><br><span class="line">    me.$emit(<span class="string">'scroll'</span>, pos)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>所以我们在右边菜单的<code>scroll</code>组件上监听<a href="https://ustbhuangyi.github.io/better-scroll/doc/zh-hans/events.html#scroll" target="_blank" rel="noopener">scroll</a>事件<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@scroll</span>=<span class="string">"scrollHeight"</span></span><br></pre></td></tr></table></figure></p><p>method<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scrollHeight (pos) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(pos);</span><br><span class="line">  <span class="keyword">this</span>.scrollY = <span class="built_in">Math</span>.abs(<span class="built_in">Math</span>.round(pos.y))</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>我们将监听得到的pos打出来看看<br><img src="https://user-gold-cdn.xitu.io/2018/8/11/1652835acc63a1a4?w=600&amp;h=292&amp;f=gif&amp;s=307964" alt="监听scroll事件，得到pos"></p><p>我们可以看到控制台打出了当前滚动的pos信息，因为在移动端开发时，坐标轴和我们数学中的坐标轴相反，所以上滑时y轴的值是负数</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/11/1652835acc65d8b1?w=911&amp;h=834&amp;f=jpeg&amp;s=52870" alt="移动开发坐标轴"></p><p>所以我们要得到每一块<code>li</code>的高度,我们可以通过拿到他们的<code>DOM</code><br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> _calculateHeight() &#123;</span><br><span class="line">  <span class="built_in">let</span> lis = this.$refs.rightItem;</span><br><span class="line">  <span class="built_in">let</span> <span class="built_in">height</span> = <span class="number">0</span></span><br><span class="line">  this.rightHeight.<span class="built_in">push</span>(<span class="built_in">height</span>)</span><br><span class="line">  Array.prototype.slice.call(lis).forEach(<span class="built_in">li</span> =&gt; &#123;</span><br><span class="line">    <span class="built_in">height</span> += <span class="built_in">li</span>.clientHeight</span><br><span class="line">    this.rightHeight.<span class="built_in">push</span>(<span class="built_in">height</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">console.<span class="built_in">log</span>(this.rightHeight)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>我们在<code>created</code>这个<code>hook</code>之后调用这个计算高度的函数<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> _calculateHeight() &#123;</span><br><span class="line">  <span class="built_in">let</span> lis = this.$refs.rightItem;</span><br><span class="line">  <span class="built_in">let</span> <span class="built_in">height</span> = <span class="number">0</span></span><br><span class="line">  this.rightHeight.<span class="built_in">push</span>(<span class="built_in">height</span>)</span><br><span class="line">  Array.prototype.slice.call(lis).forEach(<span class="built_in">li</span> =&gt; &#123;</span><br><span class="line">    <span class="built_in">height</span> += <span class="built_in">li</span>.clientHeight</span><br><span class="line">    this.rightHeight.<span class="built_in">push</span>(<span class="built_in">height</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  console.<span class="built_in">log</span>(this.rightHeight)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/8/11/1652835acc8951ee?w=720&amp;h=300&amp;f=jpeg&amp;s=15386" alt="得到右边菜单高度"></p><p>当用户在滚动时，我们需要计算当前滚动距离实在那个区间内，并拿到他的<code>index</code></p><p><img src="https://user-gold-cdn.xitu.io/2018/8/11/1652835ae7533908?w=720&amp;h=342&amp;f=jpeg&amp;s=35354" alt="找到滚动位置对应的index"><br><img src="https://user-gold-cdn.xitu.io/2018/8/11/1652835ae993cc86?w=720&amp;h=349&amp;f=jpeg&amp;s=32129" alt="找到滚动位置对应的index"><br><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  currentIndex () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; scrollY, rightHeight &#125; = this</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">index</span> = rightHeight.findIndex((height, <span class="keyword">index</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> scrollY &gt;= rightHeight[<span class="keyword">index</span>] &amp;&amp; scrollY &lt; rightHeight[<span class="keyword">index</span> + <span class="number">1</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">index</span> &gt; <span class="number">0</span> ? <span class="keyword">index</span> : <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>所以当前应该是左边菜单<code>index = 1</code>的菜单项<code>active</code><br>以上是左边菜单根据右边菜单的滑动联动的实现，用户也可以通过点击左边菜单来实现右边菜单的联动，此时，我们给菜单项加上<code>click事件</code><br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">click</span>="<span class="keyword">selectLeft</span>(<span class="keyword">index</span>, $event)<span class="string">"</span></span><br></pre></td></tr></table></figure></p><p>这里加上<code>$event</code>是为了区分原生点击事件还是<a href="https://ustbhuangyi.github.io/better-scroll/doc/zh-hans/" target="_blank" rel="noopener">better-scroll</a>派发的事件<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">selectLeft (index, <span class="keyword">event</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">event</span>._constructed) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> rightItem = <span class="keyword">this</span>.$refs.rightItem</span><br><span class="line">  <span class="keyword">let</span> el = rightItem[index]</span><br><span class="line">  <span class="keyword">this</span>.$refs.rightMenu.scrollToElement(el, <span class="number">300</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>使用<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;cascad-menu <span class="symbol">:menus=<span class="string">"menus"</span>&gt;&lt;/cascad-menu&gt;</span></span><br></pre></td></tr></table></figure></p><p>到这里我们就基本上完成了这些需求了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 
[知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)

[个人博客](https://rain120.github.io/)

[Github](https://github.com/R
      
    
    </summary>
    
    
      <category term="Vue" scheme="https://rain120.github.io/tags/Vue/"/>
    
      <category term="左右联动" scheme="https://rain120.github.io/tags/%E5%B7%A6%E5%8F%B3%E8%81%94%E5%8A%A8/"/>
    
  </entry>
  
  <entry>
    <title>Typescript尝试</title>
    <link href="https://rain120.github.io/2018/07/21/typescript-essay/"/>
    <id>https://rain120.github.io/2018/07/21/typescript-essay/</id>
    <published>2018-07-21T09:50:34.000Z</published>
    <updated>2018-08-12T04:01:55.353Z</updated>
    
    <content type="html"><![CDATA[<!-- [知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)[个人博客](https://rain120.github.io/)[Github](https://github.com/Rain120) --><p>最近入职，发现公司使用到typescript，所以就在此留下一个笔记，方便自己和大家一起学习。</p><p><a href="https://www.tslang.cn/index.html" target="_blank" rel="noopener">TypeScript</a>是一种由微软开发的自由和开源的编程语言。它是JavaScript的一个严格超集，并添加了可选的静态类型和基于类的面向对象编程。</p><p>大家日常学习可以去<a href="http://www.typescriptlang.org/play/index.html" target="_blank" rel="noopener">TS Playground</a>测试一些代码</p><p>那我们就来开始学习吧！</p><h3 id="基本类型的定义"><a href="#基本类型的定义" class="headerlink" title="基本类型的定义"></a>基本类型的定义</h3><p>在使用TS之前，我们定义的JavaScript变量都是弱类型语言，它不像C，Java这种，会在编译的时候对变量进行类型检查，所以有的时候会出现意想不到的Bug。</p><p>使用TS我们可以处理很简单的数据类型：</p><h3 id="Boolean类型"><a href="#Boolean类型" class="headerlink" title="Boolean类型"></a>Boolean类型</h3><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// <span class="built_in">boolean</span></span><br><span class="line">let isEmpty: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line">// <span class="keyword">Type</span> '<span class="string">"false"</span>' <span class="keyword">is</span> <span class="keyword">not</span> assignable <span class="keyword">to</span> <span class="keyword">type</span> <span class="symbol">'boolean</span>'.</span><br><span class="line">isEmpty = <span class="symbol">'false</span>'; </span><br><span class="line">isEmpty = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><h3 id="Number类型"><a href="#Number类型" class="headerlink" title="Number类型"></a>Number类型</h3><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// number</span><br><span class="line">let num: number = <span class="number">10</span>;</span><br><span class="line">// <span class="keyword">Type</span> '<span class="string">"1"</span>' <span class="keyword">is</span> <span class="keyword">not</span> assignable <span class="keyword">to</span> <span class="keyword">type</span> <span class="symbol">'number</span>'.</span><br><span class="line">num = <span class="string">'1'</span>;</span><br><span class="line">num = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h3 id="String类型"><a href="#String类型" class="headerlink" title="String类型"></a>String类型</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// string</span></span><br><span class="line"><span class="keyword">let</span> github_name: <span class="keyword">string</span>;</span><br><span class="line">github_name = <span class="number">120</span>;</span><br><span class="line">github_name = <span class="string">'Rain120'</span>;</span><br></pre></td></tr></table></figure><h3 id="Array类型"><a href="#Array类型" class="headerlink" title="Array类型"></a>Array类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// array</span></span><br><span class="line"><span class="keyword">let</span> arr: <span class="built_in">number</span>[];</span><br><span class="line">arr = [<span class="number">1</span>, <span class="string">'2'</span>, <span class="number">3</span>];</span><br><span class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr1: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt;;</span><br><span class="line">arr1 = [<span class="number">1</span>, <span class="string">'2'</span>, <span class="number">3</span>];</span><br><span class="line">arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fe: <span class="built_in">string</span>[];</span><br><span class="line">fe = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// TS</span></span><br><span class="line">fe = [<span class="string">'Vue'</span>, <span class="string">'React'</span>, <span class="string">'Angular'</span>];</span><br></pre></td></tr></table></figure><h3 id="不确定什么属性"><a href="#不确定什么属性" class="headerlink" title="不确定什么属性"></a>不确定什么属性</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// any</span><br><span class="line">let type_con: any;</span><br><span class="line">type_con = [];</span><br><span class="line">type_con = &#123;&#125;;</span><br><span class="line">type_con = 1;</span><br><span class="line">type_con = '2';</span><br><span class="line">type_con = true;</span><br><span class="line">type_con.func();</span><br></pre></td></tr></table></figure><h3 id="Void"><a href="#Void" class="headerlink" title="Void"></a>Void</h3><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//void</span></span><br><span class="line"><span class="keyword">let</span> test<span class="number">_</span><span class="keyword">void</span>: <span class="keyword">void</span> = null;</span><br><span class="line">test<span class="number">_</span><span class="keyword">void</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h3 id="Function定义"><a href="#Function定义" class="headerlink" title="Function定义"></a>Function定义</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">vo</span><span class="params">()</span></span>: void &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="string">'这是一个返回值为void的函数'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">vo1</span><span class="params">()</span></span>: void &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="string">'这是一个返回值为void的函数'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">str</span><span class="params">()</span></span>: <span class="built_in">string</span> &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="string">'这是一个返回值为string的函数'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">str1</span><span class="params">()</span></span>: <span class="built_in">string</span> &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="string">'这是一个返回值为string的函数'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'string'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2018/7/21/164bc6593a66c1e7?w=877&amp;h=437&amp;f=jpeg&amp;s=64087" alt="TS 编辑函数报错1"><br><img src="https://user-gold-cdn.xitu.io/2018/7/21/164bc6593ab14131?w=720&amp;h=370&amp;f=jpeg&amp;s=31832" alt="TS 编辑函数报错2"><br>当我们在使用函数的时候，有些时候会使用到函数参数默认，或者可选参数，那么在TS中如何写呢？<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">game</span>(<span class="params">name: <span class="built_in">string</span>, rank?: <span class="built_in">string</span>, score: <span class="built_in">number</span> = 0</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;name&#125;</span> <span class="subst">$&#123;rank&#125;</span> <span class="subst">$&#123;score&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(game(<span class="string">'rainy'</span>, <span class="string">'difficult'</span>, <span class="number">10000</span>));</span><br><span class="line"><span class="built_in">console</span>.log(game(<span class="string">'rainy'</span>, <span class="string">'difficult'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(game(<span class="string">'rainy'</span>));</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/21/164bc6593adca7aa?w=689&amp;h=104&amp;f=jpeg&amp;s=9130" alt="默认参数、可选参数"></p><h3 id="Class类"><a href="#Class类" class="headerlink" title="Class类"></a>Class类</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    greet() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`Hello, <span class="subst">$&#123;this.name&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Student <span class="keyword">extends</span> Person &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    greet() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`Hello, My name is <span class="subst">$&#123;this.name&#125;</span> and I'm <span class="subst">$&#123;this.age&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    study() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;this.name&#125;</span>, you should go to study.`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Person(<span class="string">'Rain120'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'p:'</span>, p.name)</span><br><span class="line">p.greet()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu = <span class="keyword">new</span> Student(<span class="string">'Rain'</span>, <span class="number">21</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'stu:'</span>, stu.name, stu.age);</span><br><span class="line">stu.greet();</span><br><span class="line">stu.study();</span><br></pre></td></tr></table></figure><p>我们在学习面向对象的语言，C++和Java时候知道类的属性和方法是有修饰符的，他们决定了外部是否能够访问类中的属性、方法，当用户为定义是，属性和方法默认都是public 属性，其中还有protected 和private 属性。当你使用private 修饰符定义成属性或者方法时，如果你需要让其他使用者使用这个属性时，你可以定义一个public 的方法，之后用户只能通过这个API接口来获取属性值或者方法的结果，例如：<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">    <span class="keyword">private</span> name: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    getName() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Person(<span class="string">'Rain120'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'person name:'</span>, p.name)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'person name:'</span>, p.getName())</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/21/164bc6593a540700?w=720&amp;h=310&amp;f=jpeg&amp;s=27579" alt="private修饰符"></p><p>虽然这里报错了，但是编译结果却是可以的应为TS在转换成JS语言后，并没有真的将name编译成私有的属性，TypeScript的核心原则之一是对值所具有的结构进行类型检查，它的作用只是提示开发者。</p><p>protected 修饰符与private 修饰符的行为很相似，但有一点不同，protected 成员在派生类中仍然可以访问, 这就不详细讲解这些了，大家可以去学习下Java或者C++的类，感受一下。</p><h3 id="接口（Interface）"><a href="#接口（Interface）" class="headerlink" title="接口（Interface）"></a>接口（Interface）</h3><p>在TypeScript里，接口的作用就是为这些类型命名和为你的代码或第三方代码定义契约。这句话太官方了，我自己理解的就是它定义了一些你自己约定的参数类型。</p><p>工作中，我们使用到的是React+Typescript，所以，我把我日常写法拿出来。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="type">SystemsProps</span> &#123;</span><br><span class="line">    systems: any</span><br><span class="line">&#125;</span><br><span class="line">export <span class="class"><span class="keyword">class</span> <span class="title">Systems</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component&lt;SystemsProps</span>, <span class="title">any&gt;</span></span></span><br><span class="line"><span class="class">    ...</span></span><br><span class="line"><span class="class">    <span class="title">render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">       const &#123; systems &#125; = <span class="keyword">this</span>.props</span><br><span class="line">       <span class="keyword">return</span> (</span><br><span class="line">          &lt;div&gt;&#123;systems.name&#125;&lt;/div&gt;</span><br><span class="line">       )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>当然，从C++中学到接口也是可以继承的，例如：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">interface Color&#123;</span><br><span class="line">    color: string;</span><br><span class="line">&#125;</span><br><span class="line">interface Car extends Color&#123;</span><br><span class="line">    price: number;</span><br><span class="line">&#125;</span><br><span class="line">let car = &lt;Car&gt;&#123;&#125;;</span><br><span class="line">car.color = <span class="string">"white"</span>;</span><br><span class="line">car.price = 10000000;</span><br></pre></td></tr></table></figure></p><h3 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h3><p>在像C++和Java这样的语言中，可以使用泛型来创建可重用的组件，一个组件可以支持多种类型的数据。 这样用户就可以以自己的数据类型来使用组件。</p><p>其实我们之前有用到泛型，只是没有说到这个概念。<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br></pre></td></tr></table></figure></p><p>这是一个最简答你的泛型，定义了一个number类型的数组，下面我写一个复杂点的泛型：<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Fruit &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    price: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span>, price: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">    sold() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;this.name&#125;</span> sold $<span class="subst">$&#123;this.price&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fruit: <span class="built_in">Array</span>&lt;Fruit&gt; = []</span><br><span class="line">fruit[<span class="number">0</span>] = <span class="keyword">new</span> Fruit(<span class="string">'apple'</span>, <span class="number">8</span>)</span><br><span class="line">fruit[<span class="number">1</span>] = <span class="keyword">new</span> Fruit(<span class="string">'banana'</span>, <span class="number">5</span>)</span><br><span class="line">fruit[<span class="number">2</span>] = <span class="keyword">new</span> Fruit(<span class="string">'lemon'</span>, <span class="number">10</span>)</span><br><span class="line"><span class="built_in">console</span>.log(fruit)</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/21/164bc6593ad61aea?w=506&amp;h=154&amp;f=jpeg&amp;s=11894" alt="泛型类"></p><p>这个泛型是一个Fruit类型的数组，这个数组的子元素全是Fruit类型，当我们定义一个其他类型是，例如<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fruit[<span class="number">3</span>] = &#123; <span class="string">name:</span> <span class="string">'watermelon'</span>, <span class="string">price:</span> <span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/21/164bc6593acac530?w=720&amp;h=453&amp;f=jpeg&amp;s=33165" alt="泛型类报错"></p><h3 id="类型推断机制"><a href="#类型推断机制" class="headerlink" title="类型推断机制"></a>类型推断机制</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">let num</span> = 10;</span><br><span class="line"><span class="attribute">num</span> = <span class="string">'str'</span>;</span><br></pre></td></tr></table></figure><p>我们平常在使用变量赋值的时候，这样写是没有问题，但是使用TS类型检查后，它会根据用户第一次定义或者赋值的类型来推断该变量的类型，这就是TS的类型推断机制。<br><img src="https://user-gold-cdn.xitu.io/2018/7/21/164bc65957be6b52?w=720&amp;h=198&amp;f=jpeg&amp;s=14188" alt="TS的类型推断机制报错"></p><h3 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h3><p>这里我们讲下我们常见的几种的迭代器，包括for-in, for-of，用来跟forEach对比，直接上代码，我们从代码来分析它们之间的不同<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr: any = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>];</span><br><span class="line">arr.type = <span class="string">'array'</span></span><br><span class="line"></span><br><span class="line">arr.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'forEach'</span>, index, item, arr[index]);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'for-in'</span>, i, arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="string">'a'</span>: <span class="string">'I\'m a'</span>,</span><br><span class="line">    <span class="string">'b'</span>: <span class="string">'I\'m b'</span>,</span><br><span class="line">    <span class="string">'c'</span>: <span class="string">'I\'m c'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'for-of'</span>, i, obj[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/21/164bc659566d7149?w=433&amp;h=257&amp;f=jpeg&amp;s=12300" alt="迭代器结果"></p><p>从结果上来看，</p><p>forEach：只是常见的for循环，它不会遍历该对象的属性值；<br>for-in：迭代的是对象的键（key）的列表，它会遍历对象的属性；<br>for-of：迭代对象的键对应的值（value），它也不会遍历对象的属性。</p><h3 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h3><p>这个地方熟悉CommonJS的都会知道export（导出）， import（导入），所以这里就不详细讲了，直接跳过</p><p>最后讲一下，tsconfig.json的配置，详见<a href="https://github.com/hstarorg/HstarDoc/blob/master/%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3/TypeScript%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6tsconfig%E7%AE%80%E6%9E%90.md" target="_blank" rel="noopener">tsconfig.json</a><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="string">"moduleResolution"</span>: <span class="string">"node"</span>,</span><br><span class="line">    <span class="string">"outDir"</span>: .<span class="regexp">/dist", /</span>/ 生成的所有文件放在dist目录下</span><br><span class="line">    <span class="string">"target"</span>: <span class="string">"es5"</span>, <span class="comment">// 将JavaScript代码降级到低版本ECMAScript 5</span></span><br><span class="line">    <span class="string">"lib"</span>: [<span class="string">"es6"</span>, <span class="string">"dom"</span>],</span><br><span class="line">    <span class="string">"rootDir"</span>: <span class="string">"app/"</span>, <span class="comment">//仅用来控制输出的目录结构。</span></span><br><span class="line">    <span class="string">"jsx"</span>: <span class="string">"react"</span>, <span class="comment">// 用于指定按照何种方式生成jsx代码，可选react和preserve。</span></span><br><span class="line">    <span class="string">"module"</span>: <span class="string">"esnext"</span>, <span class="comment">// 用于指定模块的代码生成规则，可以使用 commonjs 、 amd 、 umd 、 system 、 es6 、 es2015 、 none 这些选项。</span></span><br><span class="line">    <span class="string">"declaration"</span>: <span class="literal">false</span>, <span class="comment">// 是否需要生成定义文件d.ts，设置为true，则生成</span></span><br><span class="line">    <span class="string">"allowJs"</span>: <span class="literal">true</span>,  <span class="comment">// 接受JavaScript做为输入</span></span><br><span class="line">    <span class="string">"allowSyntheticDefaultImports"</span>: <span class="literal">true</span>, <span class="comment">// 置为true时，则允许从没有默认导出的模块中默认导入(也就是不做检查)。</span></span><br><span class="line">    <span class="string">"inlineSourceMap"</span>: <span class="literal">false</span>, <span class="comment">// 是否需要将sourceMap文件生成到js文件中，设置为true，则生成到js文件中。</span></span><br><span class="line">    <span class="string">"sourceMap"</span>: <span class="literal">true</span>, <span class="comment">// 把 ts 文件编译成 js 文件的时候，同时生成对应的 map 文件</span></span><br><span class="line">    <span class="string">"noEmitOnError"</span>: <span class="literal">false</span>, <span class="comment">// 设置为true时，如果遇到了错误，就不再输出</span></span><br><span class="line">    <span class="string">"emitDecoratorMetadata"</span>: <span class="literal">false</span>, <span class="comment">// 设置为true，则使用元数据特性</span></span><br><span class="line">    <span class="string">"experimentalDecorators"</span>: <span class="literal">true</span>, <span class="comment">// 设置为true，则支持ES7的装饰器特性</span></span><br><span class="line">    <span class="string">"noImplicitReturns"</span>: <span class="literal">true</span>, <span class="comment">// 会防止你忘记在函数末尾返回值</span></span><br><span class="line">    <span class="string">"noImplicitThis"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"noImplicitUseStrict"</span>: <span class="literal">false</span>, <span class="comment">// 当设置为true时，编译输出时不会调用'use strict'指令（也就是不生成use strict）</span></span><br><span class="line">    <span class="string">"noImplicitAny"</span>: <span class="literal">false</span>, <span class="comment">// 如果编译器无法根据变量的用途推断出变量的类型，它就会悄悄的把变量类型默认为 any。</span></span><br><span class="line">    <span class="string">"noUnusedLocals"</span>: <span class="literal">false</span>, </span><br><span class="line">    <span class="string">"baseUrl"</span>: <span class="string">"app"</span>,</span><br><span class="line">    <span class="string">"paths"</span>: &#123;</span><br><span class="line">      <span class="string">"app"</span>: [<span class="string">"app"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 包括app下的所有.ts（对应js文件）, .tsx（对应jsx文件）文件</span></span><br><span class="line">  <span class="string">"include"</span>: [</span><br><span class="line">    <span class="string">"app/**/*.ts"</span>,</span><br><span class="line">    <span class="string">"app/**/*.tsx"</span></span><br><span class="line">  ],</span><br><span class="line">   <span class="comment">// 忽略node_modules下所有的文件</span></span><br><span class="line">  <span class="string">"exclude"</span>: [</span><br><span class="line">        <span class="string">"node_modules"</span>,</span><br><span class="line">        ... <span class="comment">//其他要忽略的文件或者正则表达式表示</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 
[知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)

[个人博客](https://rain120.github.io/)

[Github](https://github.com/R
      
    
    </summary>
    
      <category term="Typescript" scheme="https://rain120.github.io/categories/Typescript/"/>
    
    
      <category term="Typescript" scheme="https://rain120.github.io/tags/Typescript/"/>
    
  </entry>
  
  <entry>
    <title>office 2016专业版激活教程</title>
    <link href="https://rain120.github.io/2018/07/21/Crack-Office/"/>
    <id>https://rain120.github.io/2018/07/21/Crack-Office/</id>
    <published>2018-07-21T09:15:47.000Z</published>
    <updated>2018-08-12T04:06:22.226Z</updated>
    
    <content type="html"><![CDATA[<!-- [知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)[个人博客](https://rain120.github.io/)[Github](https://github.com/Rain120) --><p>传送门：<a href="https://github.com/Rain120/Free-Source/tree/master/office%20%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B" target="_blank" rel="noopener">office 2016专业版激活教程</a></p><h1 id="office-2016专业版激活教程"><a href="#office-2016专业版激活教程" class="headerlink" title="office 2016专业版激活教程"></a>office 2016专业版激活教程</h1><ul><li>进入office激活教程中选择自己的版本进入相应的文件夹，下载相应的bat.txt</li><li>将bat.txt改为bat.cmd，默认是没有显示文件扩展名的，打开方式如下<br><img src="https://camo.githubusercontent.com/793c31d81d64f2ed946053fb9bd71aac153550af/68747470733a2f2f706963332e7a68696d672e636f6d2f38302f76322d31333262336135376131626530656565323033373735353239653666336330325f68642e6a7067" alt="打开文件扩展名"></li><li>管理员身份运行<br><img src="https://pic2.zhimg.com/80/v2-a8edacb5e790ccae2819e58286f5763f_hd.jpg" alt="管理员身份运行"></li><li>运行ing<br><img src="https://camo.githubusercontent.com/d3e4ac83c39b927564130d744920215214e49a20/68747470733a2f2f706963342e7a68696d672e636f6d2f38302f76322d36653961353662626130336266633161343765646232373762306630373632355f68642e6a7067" alt="运行ing"></li><li>运行完成<br><img src="https://camo.githubusercontent.com/25de5d5a4f35f0cdb01c0c2277ff1209ab6551d5/68747470733a2f2f706963332e7a68696d672e636f6d2f38302f76322d63663437343531316534333433353835613834373162313063393337663231645f68642e6a7067" alt="运行完成"></li><li>激活完成<br><img src="https://pic4.zhimg.com/80/v2-df6d0820be380896756cdf913b91baa7_hd.jpg" alt="激活完成"></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 
[知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)

[个人博客](https://rain120.github.io/)

[Github](https://github.com/R
      
    
    </summary>
    
      <category term="Office2016 激活office" scheme="https://rain120.github.io/categories/Office2016-%E6%BF%80%E6%B4%BBoffice/"/>
    
    
      <category term="Office 2016" scheme="https://rain120.github.io/tags/Office-2016/"/>
    
      <category term="激活office" scheme="https://rain120.github.io/tags/%E6%BF%80%E6%B4%BBoffice/"/>
    
  </entry>
  
  <entry>
    <title>Chrome DevTools调试（前后端小白必备招式）-- 第一招（设备模式+元素面板）</title>
    <link href="https://rain120.github.io/2018/07/04/Chrome-Debug-01/"/>
    <id>https://rain120.github.io/2018/07/04/Chrome-Debug-01/</id>
    <published>2018-07-04T13:48:49.000Z</published>
    <updated>2018-08-12T03:56:42.389Z</updated>
    
    <content type="html"><![CDATA[<!-- [知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)[个人博客](https://rain120.github.io/)[Github](https://github.com/Rain120) --><p>转眼就毕业了，大家都各奔前程，同学有走读研，有走后端，有走测试，前端就我一个人了，所以肩负起那些走南闯北的同学的希望，解决他们遇到的前端Bug问题，然后发现好多同学都不会借助浏览器调试找出问题的所在，超级心累</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae17ae286b0?w=225&amp;h=225&amp;f=jpeg&amp;s=7238" alt="心累"></p><p>因此留下这篇日志，为了方便我前端小白的那些同学更快解决问题。</p><p>此文只介绍Google的Chrome DevTools，其他浏览器大同小异，请自己探索。</p><p><a href="https://developers.google.com/web/tools/chrome-devtools/?hl=zh-cn" target="_blank" rel="noopener">官方链接</a></p><p>Chrome 开发者工具是一套内置于Google Chrome中的Web开发和调试工具，可用来对网站进行迭代、调试和分析。</p><p>打开Chrome 开发者工具</p><ul><li>在页面元素上右键点击，选择 “检查”</li><li>使用 快捷键 Ctrl+Shift+I (Windows) 或 Cmd+Opt+I (Mac)</li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae176f9efd0?w=720&amp;h=337&amp;f=jpeg&amp;s=27952" alt="Open"></p><p>我就拿我的知乎主页来介绍吧，开发者工具打开之后</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae17702d716?w=720&amp;h=341&amp;f=jpeg&amp;s=34659" alt="打开开发者工具后"></p><p>我们先了解一下开发者工具的面板介绍：</p><ol><li>设备模式</li></ol><p>当你的项目是移动适配时，你可以根据这个选项设置你的设备类型，包括IPhone6/7/X等设备</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae17bf244c3?w=720&amp;h=323&amp;f=jpeg&amp;s=39801" alt="设备模式jpg"></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae17b44b13b?w=600&amp;h=288&amp;f=gif&amp;s=162240" alt="设备模式Gif"></p><ol start="2"><li>元素面板</li></ol><p>你可以选择开发者工具中的左上角的那个Button，或者Windows下使用快捷键Shift+Ctrl+C</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae1a6ba035b?w=600&amp;h=288&amp;f=gif&amp;s=1070743" alt="元素面板"></p><p>检查应用到元素的样式</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae1951f5701?w=720&amp;h=644&amp;f=jpeg&amp;s=84349" alt="Style面板"></p><ol><li>与元素匹配的选择器的关联样式。</li><li>User Agent 样式表清晰标记，并且在网页上经常被 CSS 替换。</li><li>已被级联规则替换的规则将显示为带删除线的文本。</li><li>继承的样式将在“Inherited from <node>”标头下显示为一组。点击标头中的 DOM 节点可以导航到其在 DOM 树视图中的位置。 （CSS 2.1 属性表显示了哪些属性是可以继承的。）</node></li><li>灰色的条目不是已定义的规则，而是在运行时计算的规则。</li></ol><p>如图示，当你在点击该Button时，鼠标在页面上选择任意元素，Element中会自动对齐到相应的位置，那么我们接着讲元素的其他操作<br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae1a6a1f91c?w=600&amp;h=288&amp;f=gif&amp;s=167578" alt="元素操作1"></p><p>比如，我们想知道页面上这个提问按钮的颜色是什么，我想改变，但是不知道什么颜色好看呀，我可以在页面上边看效果，边确认自己的想法<br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae1a8ad5ded?w=600&amp;h=288&amp;f=gif&amp;s=175276" alt="元素操作2"></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae1a6c6271f?w=554&amp;h=410&amp;f=jpeg&amp;s=19854" alt="颜色面板"></p><ol><li>取色器。请参阅取色器了解更多信息。</li><li>当前颜色。当前值的可视表示。</li><li>当前值。当前颜色的十六进制、RGBA 或 HSL 表示。</li><li>调色板。请参阅调色板了解更多信息。</li><li>着色和阴影选择器。</li><li>色调选择器。</li><li>不透明度选择器。</li><li>颜色值选择器。点击可以在 RGBA、HSL 和十六进制之间切换。</li><li>调色板选择器。点击可以选择不同的模板。</li></ol><p>接下来，我们讲讲如何查找类名及其样式，并在页面上修改</p><p>比如，我们要找页面上一个叫做UserAvatar的类名，然后在页面上查看他的样式，并进行一些样式的修改</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae213e2239f?w=600&amp;h=288&amp;f=gif&amp;s=269163" alt="查找类名UserAvatar"></p><p>你可以实时的修改HTML元素和CSS样式，当然这些浏览器也会有相应的提示。</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae1b84a2cac?w=720&amp;h=343&amp;f=jpeg&amp;s=49088" alt="提示"></p><p>HTML元素右击可以修改相对应的属性值</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae1c2184e80?w=720&amp;h=344&amp;f=jpeg&amp;s=43987" alt="右键菜单jpg"><br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae2125bdb50?w=600&amp;h=288&amp;f=gif&amp;s=88374" alt="右键菜单gif"></p><p>接下来就是见名知意，大家可以自己尝试下其他的功能。</p><p>在你选择到你要查看的元素后，你可以在开发者工具中看到你选择HTML，包括类名，然后你可以看到该元素类的样式<br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae21248880f?w=720&amp;h=343&amp;f=jpeg&amp;s=43411" alt="Style面板"></p><p>使用 Computed 窗格检查和编辑当前元素的框模型参数，该元素是在计算后的表现（包括margin，border，padding，这里需要理解一下盒子模型）， 框模型中的所有值均可修改，只需点击它们即可。<br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae21249eefd?w=720&amp;h=342&amp;f=jpeg&amp;s=43412" alt="Computed面板"></p><p>在 Styles 窗格中，点击您修改的文件。DevTools 会将您带到 Sources 面板，很多时候你的代码都是被压缩的状态，你可以点击左下角的{}将其进行格式化<br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae2126259dc?w=600&amp;h=288&amp;f=gif&amp;s=108587" alt="Styles -&gt; Sources"></p><p>添加、启用和停用 CSS 类</p><p>我们接着来看这个提问这个Button，点击 .cls 按钮可以查看与当前选定元素关联的所有 CSS 类。 从这里，您可以执行以下操作：</p><ul><li>启用或停用当前与元素关联的类。</li><li>向元素添加新类。</li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae2123002e6?w=720&amp;h=323&amp;f=jpeg&amp;s=43999" alt="添加、启用和停用 CSS 类jpg"><br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae244f3e09c?w=600&amp;h=289&amp;f=gif&amp;s=214418" alt="添加、启用和停用 CSS 类gif"></p><p>添加或移除动态样式（伪类）</p><p>有的时候，我们需要查看一些伪类或者动态元素样式在触发之后的状态，例如a标签hover之后的状态,例如，我们将页面中<code>&lt;a class=&quot;AppHeader-navItem&quot; href=&quot;//www.zhihu.com/&quot;&gt;首页&lt;/a&gt;</code>在触发hover之后的颜色和字体更改为<code>color:red;font-size:20px;</code><br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae24506485c?w=720&amp;h=343&amp;f=jpeg&amp;s=45720" alt="添加或移除动态样式（伪类）前"><br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae2460054c0?w=720&amp;h=336&amp;f=jpeg&amp;s=45949" alt="添加或移除动态样式（伪类）后"></p><p>从图示可知，我们在选择hover之后，之前灰色的样式变成正常转态，也就是这部分样式生效了，或者右击该元素选择进行下列操作也可以实现<br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae2461ae4d3?w=720&amp;h=320&amp;f=jpeg&amp;s=42138" alt="添加或移除动态样式（伪类）"></p><p>Styles 窗格提供了一个用于向样式规则添加 color 和 background-color 声明的快捷方式。样式规则的右下角有一个由三个点组成的图标。您需要将鼠标悬停到样式规则上才能看到这个图标。这5个图标可以通过提示得知它们的作用<br><img src="https://user-gold-cdn.xitu.io/2018/7/4/16465ae250056583?w=720&amp;h=342&amp;f=jpeg&amp;s=44749" alt="快速添加样式"></p><p>第一招，关于设备模式以及元素面板的招式，基本上已经学完了，大家可以尝试一下，我们第二招再见</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 
[知乎](https://www.zhihu.com/people/yan-yang-nian-hua-120/activities)

[个人博客](https://rain120.github.io/)

[Github](https://github.com/R
      
    
    </summary>
    
      <category term="Chrome DevTools" scheme="https://rain120.github.io/categories/Chrome-DevTools/"/>
    
    
      <category term="前端调试技巧" scheme="https://rain120.github.io/tags/%E5%89%8D%E7%AB%AF%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Chrome DevTools" scheme="https://rain120.github.io/tags/Chrome-DevTools/"/>
    
  </entry>
  
  <entry>
    <title>Jquery + dataTable + Bootstrap + 完整逻辑实现表格的增删改查</title>
    <link href="https://rain120.github.io/2018/07/03/dataTable/"/>
    <id>https://rain120.github.io/2018/07/03/dataTable/</id>
    <published>2018-07-03T09:27:42.000Z</published>
    <updated>2018-08-12T04:01:24.155Z</updated>
    
    <content type="html"><![CDATA[<p>最近在做毕设，同学在做前端页面的时候使用到JQuery、DataTable和Bootstrap这些控件，然后自己又在刷题的时候遇到一个这个demo的实现，于是就自己去官网文档上学习了一下，尝试实现这个demo</p><p>官方文档：<a href="https://datatables.net/manual/installation" target="_blank" rel="noopener">DataTable</a></p><p>Demo代码：<a href="https://github.com/Rain120/Web-Study/blob/master/datatable.html" target="_blank" rel="noopener">Demo代码</a></p><p>效果如下图示：<br><img src="https://user-gold-cdn.xitu.io/2018/7/3/1645f8c708711382?w=600&amp;h=157&amp;f=jpeg&amp;s=17130" alt="效果图示"></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/3/1645f8c70880dba7?w=600&amp;h=280&amp;f=jpeg&amp;s=22413" alt="效果图示"></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/3/1645f8c70958afba?w=600&amp;h=276&amp;f=jpeg&amp;s=24788" alt="效果图示"></p><p><img src="https://user-gold-cdn.xitu.io/2018/7/3/1645f8c70ae69983?w=600&amp;h=200&amp;f=jpeg&amp;s=19197" alt="效果图示"></p><p>顶部button DOM结构：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面上的三个button，增删改</span></span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn-group operation"</span>&gt;</span><br><span class="line">  &lt;button id=<span class="string">"btn_add"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn bg-primary"</span>&gt;</span><br><span class="line">    &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"glyphicon glyphicon-plus"</span> aria-hidden=<span class="string">"true"</span>&gt;&lt;/span&gt;新增</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">  &lt;button id=<span class="string">"btn_edit"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn bg-info"</span>&gt;</span><br><span class="line">    &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"glyphicon glyphicon-pencil"</span> aria-hidden=<span class="string">"true"</span>&gt;&lt;/span&gt;修改</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">  &lt;button id=<span class="string">"btn_delete"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-success"</span>&gt;</span><br><span class="line">    &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"glyphicon glyphicon-remove"</span> aria-hidden=<span class="string">"true"</span>&gt;&lt;/span&gt;删除</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>这里的Modal框的实现是借助<a href="http://www.runoob.com/bootstrap/bootstrap-modal-plugin.html" target="_blank" rel="noopener">Bootstrap模态框</a>来实现的</p><p>添加图书 Modal框的实现：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal fade"</span> id=<span class="string">"addBook"</span> role=<span class="string">"dialog"</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-dialog"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-content"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-header"</span>&gt;</span><br><span class="line">        &lt;button <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"close"</span> data-dismiss=<span class="string">"modal"</span>&gt;&amp;times;&lt;/button&gt;</span><br><span class="line">        &lt;h4 <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-title"</span>&gt;添加图书&lt;/h4&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div id=<span class="string">"addBookModal"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-body"</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-horizontal"</span>&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"bookName"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;书名:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"bookName"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"bookAuthor"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;作者:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"bookAuthor"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"bookPrice"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;价格:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"bookPrice"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"bookPublish"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;出版社:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"bookPublish"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"bookISBN"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;<span class="type">ISBN</span>:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"bookISBN"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-footer"</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"center-block"</span>&gt;</span><br><span class="line">          &lt;button id=<span class="string">"cancelAdd"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-default"</span> data-dismiss=<span class="string">"modal"</span>&gt;取消&lt;/button&gt;</span><br><span class="line">          &lt;button id=<span class="string">"addBooksInfo"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-success"</span> data-dismiss=<span class="string">"modal"</span>&gt;保存&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>修改图书内容Modal框的实现：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal fade"</span> id=<span class="string">"editBookInfo"</span> role=<span class="string">"dialog"</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-dialog"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-content"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-header"</span>&gt;</span><br><span class="line">        &lt;button <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"close"</span> data-dismiss=<span class="string">"modal"</span>&gt;&amp;times;&lt;/button&gt;</span><br><span class="line">        &lt;h4 <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-title"</span>&gt;修改图书内容&lt;/h4&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div id=<span class="string">"editBookModal"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-body"</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-horizontal"</span>&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"editBookName"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;书名:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"editBookName"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"editBookAuthor"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;作者:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"editBookAuthor"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"editBookPrice"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;价格:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"editBookPrice"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"editBookPublish"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;出版社:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"editBookPublish"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">"editBookISBN"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;<span class="type">ISBN</span>:*&lt;/label&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">              &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"editBookISBN"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-footer"</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"center-block"</span>&gt;</span><br><span class="line">          &lt;button id=<span class="string">"cancelEdit"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-default"</span> data-dismiss=<span class="string">"modal"</span>&gt;取消&lt;/button&gt;</span><br><span class="line">          &lt;button id=<span class="string">"saveEdit"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-success"</span> data-dismiss=<span class="string">"modal"</span>&gt;保存&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>删除Modal框的实现：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal fade"</span> id=<span class="string">"deleteBook"</span> role=<span class="string">"dialog"</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-dialog"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-content"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-header"</span>&gt;</span><br><span class="line">        &lt;button <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"close"</span> data-dismiss=<span class="string">"modal"</span>&gt;&amp;times;&lt;/button&gt;</span><br><span class="line">        &lt;h4 <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-title"</span>&gt;确认要删除吗？&lt;/h4&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-footer"</span>&gt;</span><br><span class="line">        &lt;button <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-default"</span> data-dismiss=<span class="string">"modal"</span>&gt;取消&lt;/button&gt;</span><br><span class="line">        &lt;button id=<span class="string">"delete"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-danger"</span> data-dismiss=<span class="string">"modal"</span>&gt;删除&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>表格的实现：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;table id=<span class="string">"books"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"table table-striped table-bordered row-border hover order-column"</span> cellspacing=<span class="string">"0"</span> width=<span class="string">"100%"</span>&gt;</span><br><span class="line">  &lt;thead&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">      &lt;th&gt;序号&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">      &lt;th&gt;书名&lt;/</span>th&gt;</span><br><span class="line">      &lt;th&gt;作者&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">      &lt;th&gt;价格&lt;/</span>th&gt;</span><br><span class="line">      &lt;th&gt;出版社&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">      &lt;th&gt;ISBN&lt;/</span>th&gt;</span><br><span class="line">    &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>thead&gt;</span><br><span class="line">  &lt;tbody&gt;<span class="xml"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/table&gt;</span></span><br></pre></td></tr></table></figure></p><p>使用到一些简单的自定义样式：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="undefined">    margin: 50px auto;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.operation</span> &#123;</span></span><br><span class="line"><span class="undefined">    margin: 10px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.operation</span> &gt; <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="undefined">    margin: 10px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-id">#books_length</span> &#123;</span></span><br><span class="line"><span class="undefined">    float: left;</span></span><br><span class="line"><span class="undefined">    margin-left: 20px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-id">#books_filter</span> &#123;</span></span><br><span class="line"><span class="undefined">    float: right;</span></span><br><span class="line"><span class="undefined">    margin-right: 20px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-id">#books</span> &#123;</span></span><br><span class="line"><span class="undefined">    margin: 5px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.center-block</span> &#123;</span></span><br><span class="line"><span class="undefined">    display: block;</span></span><br><span class="line"><span class="undefined">    width: 21%;</span></span><br><span class="line"><span class="undefined">    margin: auto;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>其中，dataTable有三种数据获取方式，数组，JSON和Ajax请求数据<br>例如数组数据：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">data</span> = [[<span class="string">''</span>, <span class="string">'三体'</span>, <span class="string">'刘慈欣'</span>, <span class="string">'39.00'</span>, <span class="string">'重庆出版社'</span>, <span class="string">'982513213516'</span>]]</span><br></pre></td></tr></table></figure></p><p>其实官网很多小例子，大家可以参考学习<br><a href="http://datatables.club/example/#api" target="_blank" rel="noopener">dataTables中文网</a></p><p>以上都是页面的DOM结构的实现，接下来，我们讲讲JS代码实现逻辑<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> data = [[<span class="string">''</span>, <span class="string">'三体'</span>, <span class="string">'刘慈欣'</span>, <span class="string">'39.00'</span>, <span class="string">'重庆出版社'</span>, <span class="string">'982513213516'</span>]]</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> titles = [<span class="string">'书名'</span>, <span class="string">'作者'</span>, <span class="string">'价格'</span>, <span class="string">'出版社'</span>, <span class="string">'ISBN'</span>]</span></span><br><span class="line"><span class="javascript">  $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> table = $(<span class="string">'#books'</span>).DataTable(&#123;</span></span><br><span class="line"><span class="undefined">      data: data,</span></span><br><span class="line"><span class="actionscript">      <span class="string">"pagingType"</span>: <span class="string">"full_numbers"</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">"bSort"</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 国际化</span></span></span><br><span class="line"><span class="actionscript">      <span class="string">"language"</span>: &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sProcessing"</span>: <span class="string">"处理中..."</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sLengthMenu"</span>: <span class="string">"显示 _MENU_ 项结果"</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sZeroRecords"</span>: <span class="string">"没有匹配结果"</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sInfo"</span>: <span class="string">"显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项"</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sInfoEmpty"</span>: <span class="string">"显示第 0 至 0 项结果，共 0 项"</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sInfoFiltered"</span>: <span class="string">"(由 _MAX_ 项结果过滤)"</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sInfoPostFix"</span>: <span class="string">""</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sSearch"</span>: <span class="string">"搜索:"</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sUrl"</span>: <span class="string">""</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sEmptyTable"</span>: <span class="string">"表中数据为空"</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sLoadingRecords"</span>: <span class="string">"载入中..."</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sInfoThousands"</span>: <span class="string">","</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"oPaginate"</span>: &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="string">"sFirst"</span>: <span class="string">"首页"</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"sPrevious"</span>: <span class="string">"上页"</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"sNext"</span>: <span class="string">"下页"</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"sLast"</span>: <span class="string">"末页"</span></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 排序方式</span></span></span><br><span class="line"><span class="actionscript">        <span class="string">"oAria"</span>: &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="string">"sSortAscending"</span>: <span class="string">": 以升序排列此列"</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"sSortDescending"</span>: <span class="string">": 以降序排列此列"</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="actionscript">      <span class="string">"columnDefs"</span>: [&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="string">"searchable"</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"orderable"</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"targets"</span>: <span class="number">0</span></span></span><br><span class="line"><span class="undefined">      &#125;],</span></span><br><span class="line"><span class="actionscript">      <span class="string">"order"</span>: [[<span class="number">1</span>, <span class="string">'asc'</span>]]</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    table.on(<span class="string">'order.dt search.dt'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">      table.column(0, &#123;</span></span><br><span class="line"><span class="actionscript">        search: <span class="string">'applied'</span>,</span></span><br><span class="line"><span class="actionscript">        order: <span class="string">'applied'</span></span></span><br><span class="line"><span class="actionscript">      &#125;).nodes().each(<span class="function"><span class="keyword">function</span><span class="params">(cell, i)</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">        cell.innerHTML = i + 1;</span></span><br><span class="line"><span class="undefined">      &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;).draw();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#books tbody'</span>).on(<span class="string">'click'</span>, <span class="string">'tr'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> ( $(<span class="keyword">this</span>).hasClass(<span class="string">'selected'</span>) ) &#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="keyword">this</span>).removeClass(<span class="string">'selected'</span>);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        table.$(<span class="string">'tr.selected'</span>).removeClass(<span class="string">'selected'</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="keyword">this</span>).addClass(<span class="string">'selected'</span>);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 取消添加</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">"#cancelAdd"</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'cancelAdd'</span>);</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"#addBookModal"</span>).find(<span class="string">'input'</span>).val(<span class="string">''</span>)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 添加图书信息</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">"#addBooksInfo"</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'addBooksInfo'</span>); </span></span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span> (data.length) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> ($(<span class="string">"#addBookModal"</span>).find(<span class="string">'input'</span>).val() !== <span class="string">''</span>) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> bookName = $(<span class="string">"#bookName"</span>).val()</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> bookAuthor = $(<span class="string">"#bookAuthor"</span>).val()</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> bookPrice = $(<span class="string">"#bookPrice"</span>).val()</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> bookPublish = $(<span class="string">"#bookPublish"</span>).val()</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> bookISBN = $(<span class="string">"#bookISBN"</span>).val()</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> addBookInfos = [].concat(bookName, bookAuthor, bookPrice, bookPublish, bookISBN);</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; addBookInfos.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (addBookInfos[i] === <span class="string">''</span>) &#123;</span></span><br><span class="line"><span class="actionscript">              alert(titles[i] + <span class="string">'内容不能为空'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="actionscript">          table.row.add([<span class="string">''</span>, bookName, bookAuthor, bookPrice, bookPublish, bookISBN]).draw();</span></span><br><span class="line"><span class="javascript">          $(<span class="string">"#addBookModal"</span>).find(<span class="string">'input'</span>).val(<span class="string">''</span>)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'请输入内容'</span>)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="javascript">    $(<span class="string">"#addBooksInfo"</span>).click();    </span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">"#btn_add"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'add'</span>);</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"#addBook"</span>).modal()</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 编辑图书</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#btn_edit'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'edit'</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span> (table.rows(<span class="string">'.selected'</span>).data().length) &#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#editBookInfo"</span>).modal()</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> rowData = table.rows(<span class="string">'.selected'</span>).data()[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> inputs = $(<span class="string">"#editBookModal"</span>).find(<span class="string">'input'</span>)</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; inputs.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">          $(inputs[i]).val(rowData[i + <span class="number">1</span>])</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'请选择项目'</span>);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 保存编辑</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">"#saveEdit"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> editBookName = $(<span class="string">"#editBookName"</span>).val()</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> editBookAuthor = $(<span class="string">"#editBookAuthor"</span>).val()</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> editBookPrice = $(<span class="string">"#editBookPrice"</span>).val()</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> editBookPublish = $(<span class="string">"#editBookPublish"</span>).val()</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> editBookISBN = $(<span class="string">"#editBookISBN"</span>).val()</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> newRowData = [].concat(editBookName, editBookAuthor, editBookPrice, editBookPublish, editBookISBN);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> tds = <span class="built_in">Array</span>.prototype.slice.call($(<span class="string">'.selected td'</span>))</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; newRowData.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (newRowData[i] !== <span class="string">''</span>) &#123;</span></span><br><span class="line"><span class="undefined">          tds[i + 1].innerHTML = newRowData[i];</span></span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">          alert(titles[i] + <span class="string">'内容不能为空'</span>)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;    </span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 取消保存</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">"#cancelEdit"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'cancelAdd'</span>);</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"#editBookModal"</span>).find(<span class="string">'input'</span>).val(<span class="string">''</span>)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 删除项目</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#btn_delete'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span> (table.rows(<span class="string">'.selected'</span>).data().length) &#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#deleteBook"</span>).modal()</span></span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'请选择项目'</span>);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 删除</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#delete'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">      table.row(<span class="string">'.selected'</span>).remove().draw(<span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近在做毕设，同学在做前端页面的时候使用到JQuery、DataTable和Bootstrap这些控件，然后自己又在刷题的时候遇到一个这个demo的实现，于是就自己去官网文档上学习了一下，尝试实现这个demo&lt;/p&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://dat
      
    
    </summary>
    
      <category term="dataTable" scheme="https://rain120.github.io/categories/dataTable/"/>
    
    
      <category term="JQuery" scheme="https://rain120.github.io/tags/JQuery/"/>
    
      <category term="Bootstrap" scheme="https://rain120.github.io/tags/Bootstrap/"/>
    
      <category term="dataTable" scheme="https://rain120.github.io/tags/dataTable/"/>
    
  </entry>
  
  <entry>
    <title>Vue之网易云音乐横向菜单的实现</title>
    <link href="https://rain120.github.io/2018/06/30/horizontal-menu/"/>
    <id>https://rain120.github.io/2018/06/30/horizontal-menu/</id>
    <published>2018-06-30T12:25:22.000Z</published>
    <updated>2018-08-12T04:01:00.915Z</updated>
    
    <content type="html"><![CDATA[<p>之前在学习的时候有稍微捣鼓一下网易云音乐，主要是为了学习Vue，巩固基础知识，然后看到这个横向菜单，当然个人也喜欢看球，所以每次看腾讯NBA的时候总是会想这个是这样实现的，于是借助之前还没写完的demo，完成这个横向菜单的实现，废话不多说，先上效果图</p><p><img src="https://user-gold-cdn.xitu.io/2018/6/30/16450c1ebbf11c35?w=458&amp;h=815&amp;f=gif&amp;s=633447" alt="网易云音乐横向菜单"></p><p>从使用虎牙直播横向菜单的体验得到，我们的横向菜单的业务逻辑如下：</p><ol><li>滑动菜单，并选择菜单项；</li><li>选择某个菜单项，该菜单项居中（去除边界菜单项）</li></ol><p>我们的使用的better-scroll这个插件来实现，具体安装请参考<a href="https://ustbhuangyi.github.io/better-scroll/#/" target="_blank" rel="noopener">BetterScroll</a></p><p>前端DOM结构<br><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mv-tabs"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tabs"</span> <span class="attr">ref</span>=<span class="string">"tabsWrapper"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">ref</span>=<span class="string">"tab"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item, index) in tabs"</span> <span class="attr">:key</span>=<span class="string">"index"</span> @<span class="attr">click</span>=<span class="string">"selectItem(index)"</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">tag</span>=<span class="string">"div"</span> <span class="attr">:to</span>=<span class="string">"item.to"</span> <span class="attr">class</span>=<span class="string">"tab-item"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"tab-link"</span>&gt;</span></span><span class="template-variable">&#123;&#123;item.title&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>通过使用插件Vue来调试项目<br><img src="https://user-gold-cdn.xitu.io/2018/6/30/16450c1ebc02d5b1?w=699&amp;h=402&amp;f=jpeg&amp;s=23996" alt="Vue DOM"></p><p>其中tabs包括菜单项名和它的路由<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">data</span> () &#123;</span><br><span class="line">    <span class="selector-tag">return</span> &#123;</span><br><span class="line">      <span class="attribute">tabs</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attribute">to</span>: <span class="string">'/mv/recommend-mv'</span>,</span><br><span class="line">          <span class="attribute">title</span>: <span class="string">'推荐'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attribute">to</span>: <span class="string">'/mv/music-mv'</span>,</span><br><span class="line">          <span class="attribute">title</span>: <span class="string">'音乐'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attribute">to</span>: <span class="string">'show-mv'</span>,</span><br><span class="line">          <span class="attribute">title</span>: <span class="string">'Show'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attribute">to</span>: <span class="string">'/mv/acg-mv'</span>,</span><br><span class="line">          <span class="attribute">title</span>: <span class="string">'二次元'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attribute">to</span>: <span class="string">'/mv/dance-mv'</span>,</span><br><span class="line">          <span class="attribute">title</span>: <span class="string">'舞蹈'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attribute">to</span>: <span class="string">'/mv/game-mv'</span>,</span><br><span class="line">          <span class="attribute">title</span>: <span class="string">'游戏'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attribute">to</span>: <span class="string">'/mv/mvs'</span>,</span><br><span class="line">          <span class="attribute">title</span>: <span class="string">'mv'</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attribute">mX</span>: <span class="number">0</span>, <span class="comment">// tab移动的距离</span></span><br><span class="line">      <span class="attribute">tabWidth</span>: <span class="number">80</span> <span class="comment">// 每个tab的宽度</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>样式<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">.mv-tabs</span><br><span class="line">    <span class="attribute">position</span> relative</span><br><span class="line">    <span class="attribute">top</span> -<span class="number">5.5rem</span></span><br><span class="line">    <span class="attribute">bottom</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    .tabs</span><br><span class="line">      <span class="attribute">margin-top</span> <span class="number">3rem</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">2.5rem</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">line-height</span> <span class="number">2.5rem</span></span><br><span class="line">      <span class="attribute">box-sizing</span> border-box</span><br><span class="line">      <span class="attribute">overflow</span> hidden</span><br><span class="line">      <span class="attribute">white-space</span> nowrap</span><br><span class="line">      .tab-item</span><br><span class="line">        <span class="attribute">float</span> left</span><br><span class="line">        <span class="attribute">width</span> <span class="number">80px</span></span><br><span class="line">        <span class="attribute">height</span> <span class="number">40px</span></span><br><span class="line">        <span class="attribute">text-align</span> center</span><br><span class="line">        .tab-link</span><br><span class="line">          <span class="attribute">padding-bottom</span> <span class="number">5px</span></span><br><span class="line">          <span class="attribute">color</span> <span class="number">#333333</span></span><br><span class="line">        &amp;.router-link-active</span><br><span class="line">          <span class="attribute">color</span> <span class="number">#d33a31</span></span><br><span class="line">          <span class="attribute">border-bottom</span> <span class="number">2px</span> solid <span class="number">#d33a31</span></span><br><span class="line">          <span class="attribute">box-sizing</span> border-box</span><br></pre></td></tr></table></figure></p><p>样式和DOM结构就不详细讲了，具体讲实现吧<br>首先需要计算出这个菜单中所有内容的width，也就是包裹这个菜单的容器；接着初始化better-scroll，并忽略该实例对象的垂直方向的滑动.<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    _initMenu () &#123;</span><br><span class="line">      let tabsWidth = <span class="keyword">this</span>.tabWidth</span><br><span class="line">      let width = <span class="keyword">this</span>.tabs.length * tabsWidth</span><br><span class="line">      <span class="keyword">this</span>.$refs.tab.style.width = `$&#123;width&#125;px`</span><br><span class="line">      <span class="keyword">this</span>.$nextTick(() =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.scroll) &#123;</span><br><span class="line">          <span class="keyword">this</span>.scroll = new BScroll(<span class="keyword">this</span>.$refs.tabsWrapper, &#123;</span><br><span class="line">            scrollX: <span class="literal">true</span>,</span><br><span class="line">            eventPassthrough: <span class="string">'vertical'</span> <span class="comment">// 忽略这个实例对象的垂直滑动事件</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.scroll.refresh()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p>这里是第二个业务逻辑的思路（应该会有更好的思路，求大佬指点）</p><p>我的思路是这样的：每一个菜单项都会有各自的点击移动操作，所以我是根据当前tabs的位置，通过点击事件将tabs移动到它相应的位置，例如，中间菜单项在点击时会移动到居中的位置。<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    selectItem (index) &#123;</span><br><span class="line">      let tabs = <span class="keyword">this</span>.$refs.tab</span><br><span class="line">      let moveX = +tabs.style.transform.replace(/[^<span class="number">0</span><span class="number">-9</span>\-,]/g, <span class="string">''</span>).split(<span class="string">','</span>)[<span class="number">0</span>]</span><br><span class="line">      switch (index) &#123;</span><br><span class="line">        case <span class="number">0</span>:</span><br><span class="line">          <span class="keyword">if</span> (moveX &lt;= <span class="number">0</span> &amp;&amp; moveX &gt; -<span class="keyword">this</span>.tabWidth) &#123;</span><br><span class="line">            <span class="keyword">this</span>.mX = <span class="number">0</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        case <span class="number">1</span>:</span><br><span class="line">          <span class="keyword">if</span> (moveX &lt;= <span class="number">0</span> &amp;&amp; moveX &gt; -<span class="keyword">this</span>.tabWidth * <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.mX = <span class="number">0</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        case <span class="number">2</span>:</span><br><span class="line">          <span class="keyword">if</span> (moveX &lt; <span class="number">0</span> &amp;&amp; moveX &gt;= -<span class="keyword">this</span>.tabWidth * <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.mX = <span class="number">0</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        case <span class="number">3</span>:</span><br><span class="line">          <span class="keyword">if</span> (moveX &lt;= <span class="number">0</span> &amp;&amp; moveX &gt;= -<span class="keyword">this</span>.tabWidth * <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.mX = -<span class="keyword">this</span>.tabWidth</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        case <span class="number">4</span>:</span><br><span class="line">          <span class="keyword">if</span> (moveX &lt;= <span class="number">0</span> &amp;&amp; moveX &gt;= -<span class="keyword">this</span>.tabWidth * <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.mX = -<span class="keyword">this</span>.tabWidth * <span class="number">2</span></span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (moveX === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.mX = -<span class="keyword">this</span>.tabWidth * <span class="number">2</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        case <span class="number">5</span>:</span><br><span class="line">          <span class="keyword">if</span> (moveX &lt; <span class="number">0</span> &amp;&amp; moveX &gt; -<span class="keyword">this</span>.tabWidth * <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.mX = -<span class="keyword">this</span>.tabWidth * <span class="number">2</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        case <span class="number">6</span>:</span><br><span class="line">          <span class="keyword">if</span> (moveX &gt; -<span class="keyword">this</span>.tabWidth * <span class="number">2</span> &amp;&amp; moveX &lt; -<span class="keyword">this</span>.tabWidth * <span class="number">3</span> / <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.mX = -<span class="keyword">this</span>.tabWidth * <span class="number">2</span> + <span class="number">10</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">      tabs.style.transform = `translate($&#123;<span class="keyword">this</span>.mX&#125;px, <span class="number">0</span>)`</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/6/30/16450c1ebc810b0a?w=714&amp;h=259&amp;f=jpeg&amp;s=46883" alt="渲染的DOM结构"></p><p>很多时候我们在使用better-scroll的时候，发现这个实例对象已经初始化，但是不能滑动，是因为，Vue是异步更新数据的，所以我们需要异步计算它实际内容的宽度或者高度，Vue提供一个了this.$nextTick()这个hock来实现，这个API是在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。</p><p>官方解释：<a href="https://cn.vuejs.org/v2/api/#Vue-nextTick" target="_blank" rel="noopener">$nextTick</a></p><p>当生命钩子mounted触发时，初始化better-scroll<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mounted () &#123;</span><br><span class="line">    <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>._initMenu()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>全部代码<br><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mv-tabs"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tabs"</span> <span class="attr">ref</span>=<span class="string">"tabsWrapper"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">ref</span>=<span class="string">"tab"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item, index) in tabs"</span> <span class="attr">:key</span>=<span class="string">"index"</span> @<span class="attr">click</span>=<span class="string">"selectItem(index)"</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">tag</span>=<span class="string">"div"</span> <span class="attr">:to</span>=<span class="string">"item.to"</span> <span class="attr">class</span>=<span class="string">"tab-item"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"tab-link"</span>&gt;</span></span><span class="template-variable">&#123;&#123;item.title&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="xml">import BScroll from 'better-scroll'</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">export default &#123;</span></span><br><span class="line"><span class="xml">  data () &#123;</span></span><br><span class="line"><span class="xml">    return &#123;</span></span><br><span class="line"><span class="xml">      tabs: [</span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">          to: '/mv/recommend-mv',</span></span><br><span class="line"><span class="xml">          title: '推荐'</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">          to: '/mv/music-mv',</span></span><br><span class="line"><span class="xml">          title: '音乐'</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">          to: 'show-mv',</span></span><br><span class="line"><span class="xml">          title: 'Show'</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">          to: '/mv/acg-mv',</span></span><br><span class="line"><span class="xml">          title: '二次元'</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">          to: '/mv/dance-mv',</span></span><br><span class="line"><span class="xml">          title: '舞蹈'</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">          to: '/mv/game-mv',</span></span><br><span class="line"><span class="xml">          title: '游戏'</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">          to: '/mv/mvs',</span></span><br><span class="line"><span class="xml">          title: 'mv'</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">      ],</span></span><br><span class="line"><span class="xml">      mX: 0,</span></span><br><span class="line"><span class="xml">      tabWidth: 80</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  &#125;,</span></span><br><span class="line"><span class="xml">  mounted () &#123;</span></span><br><span class="line"><span class="xml">    this.$nextTick(() =&gt; &#123;</span></span><br><span class="line"><span class="xml">      this._initMenu()</span></span><br><span class="line"><span class="xml">    &#125;)</span></span><br><span class="line"><span class="xml">  &#125;,</span></span><br><span class="line"><span class="xml">  methods: &#123;</span></span><br><span class="line"><span class="xml">    selectItem (index) &#123;</span></span><br><span class="line"><span class="xml">      let tabs = this.$refs.tab</span></span><br><span class="line"><span class="xml">      let moveX = +tabs.style.transform.replace(/[^0-9\-,]/g, '').split(',')[0]</span></span><br><span class="line"><span class="xml">      switch (index) &#123;</span></span><br><span class="line"><span class="xml">        case 0:</span></span><br><span class="line"><span class="xml">          if (moveX <span class="tag">&lt;<span class="name">=</span> <span class="attr">0</span> &amp;&amp; <span class="attr">moveX</span> &gt;</span> -this.tabWidth) &#123;</span></span><br><span class="line"><span class="xml">            this.mX = 0</span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">          break</span></span><br><span class="line"><span class="xml">        case 1:</span></span><br><span class="line"><span class="xml">          if (moveX <span class="tag">&lt;<span class="name">=</span> <span class="attr">0</span> &amp;&amp; <span class="attr">moveX</span> &gt;</span> -this.tabWidth * 2) &#123;</span></span><br><span class="line"><span class="xml">            this.mX = 0</span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">          break</span></span><br><span class="line"><span class="xml">        case 2:</span></span><br><span class="line"><span class="xml">          if (moveX <span class="tag">&lt; <span class="attr">0</span> &amp;&amp; <span class="attr">moveX</span> &gt;</span>= -this.tabWidth * 2) &#123;</span></span><br><span class="line"><span class="xml">            this.mX = 0</span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">          break</span></span><br><span class="line"><span class="xml">        case 3:</span></span><br><span class="line"><span class="xml">          if (moveX <span class="tag">&lt;<span class="name">=</span> <span class="attr">0</span> &amp;&amp; <span class="attr">moveX</span> &gt;</span>= -this.tabWidth * 2) &#123;</span></span><br><span class="line"><span class="xml">            this.mX = -this.tabWidth</span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">          break</span></span><br><span class="line"><span class="xml">        case 4:</span></span><br><span class="line"><span class="xml">          if (moveX <span class="tag">&lt;<span class="name">=</span> <span class="attr">0</span> &amp;&amp; <span class="attr">moveX</span> &gt;</span>= -this.tabWidth * 2) &#123;</span></span><br><span class="line"><span class="xml">            this.mX = -this.tabWidth * 2</span></span><br><span class="line"><span class="xml">          &#125; else if (moveX === 0) &#123;</span></span><br><span class="line"><span class="xml">            this.mX = -this.tabWidth * 2</span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">          break</span></span><br><span class="line"><span class="xml">        case 5:</span></span><br><span class="line"><span class="xml">          if (moveX <span class="tag">&lt; <span class="attr">0</span> &amp;&amp; <span class="attr">moveX</span> &gt;</span> -this.tabWidth * 2) &#123;</span></span><br><span class="line"><span class="xml">            this.mX = -this.tabWidth * 2</span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">          break</span></span><br><span class="line"><span class="xml">        case 6:</span></span><br><span class="line"><span class="xml">          if (moveX &gt; -this.tabWidth * 2 &amp;&amp; moveX <span class="tag">&lt; <span class="attr">-this.tabWidth</span> * <span class="attr">3</span> / <span class="attr">2</span>) &#123;</span></span></span><br><span class="line"><span class="xml">            this.mX = -this.tabWidth * 2 + 10</span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">          break</span></span><br><span class="line"><span class="xml">        default:</span></span><br><span class="line"><span class="xml">          break</span></span><br><span class="line"><span class="xml">      &#125;</span></span><br><span class="line"><span class="xml">      tabs.style.transform = `translate($&#123;this.mX&#125;px, 0)`</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    _initMenu () &#123;</span></span><br><span class="line"><span class="xml">      let tabsWidth = this.tabWidth</span></span><br><span class="line"><span class="xml">      let width = this.tabs.length * tabsWidth</span></span><br><span class="line"><span class="xml">      this.$refs.tab.style.width = `$&#123;width&#125;px`</span></span><br><span class="line"><span class="xml">      this.$nextTick(() =&gt; &#123;</span></span><br><span class="line"><span class="xml">        if (!this.scroll) &#123;</span></span><br><span class="line"><span class="xml">          this.scroll = new BScroll(this.$refs.tabsWrapper, &#123;</span></span><br><span class="line"><span class="xml">            scrollX: true,</span></span><br><span class="line"><span class="xml">            eventPassthrough: 'vertical'</span></span><br><span class="line"><span class="xml">          &#125;)</span></span><br><span class="line"><span class="xml">        &#125; else &#123;</span></span><br><span class="line"><span class="xml">          this.scroll.refresh()</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">      &#125;)</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"stylus"</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="xml">  .mv-tabs</span></span><br><span class="line"><span class="xml">    position relative</span></span><br><span class="line"><span class="xml">    top -5.5rem</span></span><br><span class="line"><span class="xml">    bottom 0</span></span><br><span class="line"><span class="xml">    width 100%</span></span><br><span class="line"><span class="xml">    .tabs</span></span><br><span class="line"><span class="xml">      margin-top 3rem</span></span><br><span class="line"><span class="xml">      height 2.5rem</span></span><br><span class="line"><span class="xml">      width 100%</span></span><br><span class="line"><span class="xml">      line-height 2.5rem</span></span><br><span class="line"><span class="xml">      box-sizing border-box</span></span><br><span class="line"><span class="xml">      overflow hidden</span></span><br><span class="line"><span class="xml">      white-space nowrap</span></span><br><span class="line"><span class="xml">      .tab-item</span></span><br><span class="line"><span class="xml">        float left</span></span><br><span class="line"><span class="xml">        width 80px</span></span><br><span class="line"><span class="xml">        height 40px</span></span><br><span class="line"><span class="xml">        text-align center</span></span><br><span class="line"><span class="xml">        .tab-link</span></span><br><span class="line"><span class="xml">          padding-bottom 5px</span></span><br><span class="line"><span class="xml">          color #333333</span></span><br><span class="line"><span class="xml">        &amp;.router-link-active</span></span><br><span class="line"><span class="xml">          color #d33a31</span></span><br><span class="line"><span class="xml">          border-bottom 2px solid #d33a31</span></span><br><span class="line"><span class="xml">          box-sizing border-box</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;之前在学习的时候有稍微捣鼓一下网易云音乐，主要是为了学习Vue，巩固基础知识，然后看到这个横向菜单，当然个人也喜欢看球，所以每次看腾讯NBA的时候总是会想这个是这样实现的，于是借助之前还没写完的demo，完成这个横向菜单的实现，废话不多说，先上效果图&lt;/p&gt;
&lt;p&gt;&lt;img
      
    
    </summary>
    
      <category term="Vue" scheme="https://rain120.github.io/categories/Vue/"/>
    
    
      <category term="Vue" scheme="https://rain120.github.io/tags/Vue/"/>
    
      <category term="better-scroll" scheme="https://rain120.github.io/tags/better-scroll/"/>
    
      <category term="网易云音乐" scheme="https://rain120.github.io/tags/%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90/"/>
    
      <category term="横向菜单" scheme="https://rain120.github.io/tags/%E6%A8%AA%E5%90%91%E8%8F%9C%E5%8D%95/"/>
    
  </entry>
  
  <entry>
    <title>Vue之网易云音乐PC版轮播图的实现</title>
    <link href="https://rain120.github.io/2018/06/25/netease-slider/"/>
    <id>https://rain120.github.io/2018/06/25/netease-slider/</id>
    <published>2018-06-25T10:30:29.000Z</published>
    <updated>2018-08-11T09:17:34.051Z</updated>
    
    <content type="html"><![CDATA[<p>最近在刷网易云音乐歌单时发现首页的轮播图很有意思，正好自己想尝试做一个PC版的网易云音乐，于是就是使用Vue去做这个demo，废话少说，我要出招了，接招吧</p><p><img src="https://user-gold-cdn.xitu.io/2018/6/25/16436bd10e18e241?w=600&amp;h=179&amp;f=gif&amp;s=2044452" alt="网易云音乐PC版轮播图"></p><h4 id="页面的DOM结构"><a href="#页面的DOM结构" class="headerlink" title="页面的DOM结构"></a>页面的DOM结构</h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"slider-container"</span> ref=<span class="symbol">'slide</span>r'</span><br><span class="line">       :style=<span class="string">"sliderStyle"</span></span><br><span class="line">       <span class="meta">@mouseover</span>=<span class="string">"pause()"</span></span><br><span class="line">       <span class="meta">@mouseout</span>=<span class="string">"play()"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"slider-content"</span> :<span class="class"><span class="keyword">class</span></span>=<span class="string">"mask ? 'mask' : ''"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"slider"</span> v-<span class="keyword">for</span>=<span class="string">"(item, index) in list"</span></span><br><span class="line">        :key=<span class="string">"index"</span></span><br><span class="line">        :<span class="class"><span class="keyword">class</span></span>=<span class="string">"setClass(index)"</span></span><br><span class="line">        <span class="meta">@click</span>=<span class="string">"onClick(index)"</span> :style=<span class="string">"setBGImg(item.src)"</span>&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;i v-show=<span class="string">"arrow"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"iconfont icon-left"</span> <span class="meta">@click</span>=<span class="string">"prev()"</span>&gt;&lt;/i&gt;</span><br><span class="line">      &lt;i v-show=<span class="string">"arrow"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"iconfont icon-right"</span> <span class="meta">@click</span>=<span class="string">"next()"</span>&gt;&lt;/i&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"dots"</span> v-<span class="keyword">if</span>=<span class="string">"dots"</span>&gt;</span><br><span class="line">      &lt;span v-<span class="keyword">for</span>=<span class="string">"(item, index) in list"</span> :key=<span class="string">"index"</span></span><br><span class="line">        :style=<span class="string">"setActiveDot(index)"</span></span><br><span class="line">        <span class="meta">@mouseover</span>=<span class="string">"currentIndex = index"</span>&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h4 id="Slider-container的样式-Stylus"><a href="#Slider-container的样式-Stylus" class="headerlink" title="Slider-container的样式(Stylus)"></a>Slider-container的样式(Stylus)</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.slider-container</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">  <span class="attribute">text-align</span>: center</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">position</span>: relative</span><br></pre></td></tr></table></figure><p>这个子组件主要分为两块。</p><ol><li>轮播图，其中它们的业务逻辑是</li></ol><ul><li>自动切换</li><li>左右icon切换轮播图</li><li>点击前后轮播图切换轮播图</li><li>鼠标滑动到轮播图停止轮播，离开后继续轮播</li></ul><h4 id="Slider-content的DOM结构"><a href="#Slider-content的DOM结构" class="headerlink" title="Slider-content的DOM结构"></a>Slider-content的DOM结构</h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"slider-content"</span> :<span class="class"><span class="keyword">class</span></span>=<span class="string">"mask ? 'mask' : ''"</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"slider"</span> v-<span class="keyword">for</span>=<span class="string">"(item, index) in list"</span></span><br><span class="line">    :key=<span class="string">"index"</span></span><br><span class="line">    :<span class="class"><span class="keyword">class</span></span>=<span class="string">"setClass(index)"</span></span><br><span class="line">    <span class="meta">@click</span>=<span class="string">"onClick(index)"</span> :style=<span class="string">"setBGImg(item.src)"</span>&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;i v-show=<span class="string">"arrow"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"iconfont icon-left"</span> <span class="meta">@click</span>=<span class="string">"prev()"</span>&gt;&lt;/i&gt;</span><br><span class="line">  &lt;i v-show=<span class="string">"arrow"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"iconfont icon-right"</span> <span class="meta">@click</span>=<span class="string">"next()"</span>&gt;&lt;/i&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h4 id="Slider-content的样式-Stylus"><a href="#Slider-content的样式-Stylus" class="headerlink" title="Slider-content的样式(Stylus)"></a>Slider-content的样式(Stylus)</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">.slider-<span class="attribute">content</span></span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span>: calc(<span class="number">100%</span> - <span class="number">20px</span>)</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0%</span></span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0%</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span></span><br><span class="line">    <span class="attribute">background-size</span>: inherit</span><br><span class="line">    <span class="selector-class">.slider</span> </span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">top</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span>: <span class="number">50%</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">65%</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">transition</span>: <span class="number">500ms</span> all ease-in-out</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="number">#fff</span></span><br><span class="line">      <span class="attribute">background-repeat</span>: no-repeat</span><br><span class="line">      <span class="attribute">background-position</span>: center</span><br><span class="line">      <span class="attribute">background-size</span>: inherit</span><br><span class="line">      <span class="attribute">transform</span>: translate3d(-<span class="number">50%</span>,<span class="number">0</span>,-<span class="number">80px</span>)</span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">1</span></span><br><span class="line">      &amp;:before</span><br><span class="line">        <span class="attribute">position</span>: absolute</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">""</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">        <span class="attribute">top</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">background-color</span>: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="attribute">transition-delay</span>: <span class="number">100ms</span>!important</span><br><span class="line">        <span class="attribute">transition</span>: all <span class="number">500ms</span></span><br><span class="line">        <span class="attribute">cursor</span>: pointer</span><br><span class="line">      &amp;.active</span><br><span class="line">        <span class="attribute">transform</span>: translate3d(-<span class="number">50%</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">20</span></span><br><span class="line">      &amp;.prev</span><br><span class="line">        <span class="attribute">transform</span>: translate3d(-<span class="number">75%</span>, <span class="number">0</span>, -<span class="number">100px</span>)</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">19</span></span><br><span class="line">      &amp;.next</span><br><span class="line">        <span class="attribute">transform</span>: translate3d(-<span class="number">25%</span>, <span class="number">0</span>, -<span class="number">100px</span>)</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">18</span></span><br><span class="line">    i</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">17.5%</span></span><br><span class="line">      <span class="attribute">display</span>: none</span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">40%</span></span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">22px</span></span><br><span class="line">      <span class="attribute">color</span>: rgba(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>)</span><br><span class="line">      <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">24px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>)</span><br><span class="line">      <span class="attribute">cursor</span>: pointer</span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">21</span></span><br><span class="line">      &amp;:first-child</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">      &amp;:last-child</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">0</span></span><br><span class="line">    &amp;:hover</span><br><span class="line">      i</span><br><span class="line">        <span class="attribute">color</span>: rgba(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>)</span><br><span class="line">        <span class="attribute">display</span>: block</span><br><span class="line">    &amp;.<span class="attribute">mask</span></span><br><span class="line">      <span class="selector-class">.slider</span> </span><br><span class="line">        &amp;<span class="selector-class">.prev</span>, &amp;.next</span><br><span class="line">          &amp;:before</span><br><span class="line">            <span class="attribute">background-color</span>: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.50</span>)</span><br></pre></td></tr></table></figure><ol><li>底部的dot， 其中它们的业务逻辑是</li></ol><ul><li>当前轮播图对应位置的dot高亮</li><li>鼠标移动到相应的dot上切换对应位置的轮播图</li></ul><h4 id="Dots的DOM结构"><a href="#Dots的DOM结构" class="headerlink" title="Dots的DOM结构"></a>Dots的DOM结构</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"dots"</span> v-<span class="keyword">if</span>=<span class="string">"dots"</span>&gt;</span><br><span class="line">  &lt;span v-<span class="keyword">for</span>=<span class="string">"(item, index) in list"</span> :key=<span class="string">"index"</span></span><br><span class="line">    :style=<span class="string">"setActiveDot(index)"</span></span><br><span class="line">    @mouseover=<span class="string">"currentIndex = index"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Dots的样式-Stylus"><a href="#Dots的样式-Stylus" class="headerlink" title="Dots的样式(Stylus)"></a>Dots的样式(Stylus)</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dots</span> </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span></span><br><span class="line">  span</span><br><span class="line">    <span class="attribute">display</span>: inline-block</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">2px</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1px</span> <span class="number">3px</span></span><br><span class="line">    <span class="attribute">cursor</span>: pointer</span><br></pre></td></tr></table></figure><p>上面是页面的DOM结构和表现的实现代码，接下来我们要讲的是连招的实现，小心啦，我要摸眼W + R3了。<br>上面我们讲到轮播图的业务逻辑，接下来，我们就讲讲如何实现的的吧</p><h4 id="自动轮播"><a href="#自动轮播" class="headerlink" title="自动轮播"></a>自动轮播</h4><p><img src="https://user-gold-cdn.xitu.io/2018/6/25/16436bd10dd07a7b?w=600&amp;h=185&amp;f=gif&amp;s=540325" alt="自动轮播"><br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">play () &#123;</span><br><span class="line">  <span class="keyword">this</span>.pause();</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.autoPlay) &#123;</span><br><span class="line">    <span class="keyword">this</span>.timer = setInterval(()=&gt;&#123;</span><br><span class="line">      <span class="keyword">this</span>.next();</span><br><span class="line">    &#125;, <span class="keyword">this</span>.interval)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="暂停轮播"><a href="#暂停轮播" class="headerlink" title="暂停轮播"></a>暂停轮播</h4><p><img src="https://user-gold-cdn.xitu.io/2018/6/25/16436bd10df548d0?w=600&amp;h=185&amp;f=gif&amp;s=169191" alt="暂停轮播"><br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pause () &#123;</span><br><span class="line">  clearInterval(<span class="keyword">this</span>.timer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="Icon切换轮播图"><a href="#Icon切换轮播图" class="headerlink" title="Icon切换轮播图"></a>Icon切换轮播图</h4><p><img src="https://user-gold-cdn.xitu.io/2018/6/25/16436bd10e659b95?w=600&amp;h=185&amp;f=gif&amp;s=697043" alt="Icon切换轮播图"><br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">next () &#123;</span><br><span class="line">  <span class="keyword">this</span>.currentIndex = ++<span class="keyword">this</span>.currentIndex % <span class="keyword">this</span>.list.length;</span><br><span class="line">&#125;,</span><br><span class="line">prev () &#123;</span><br><span class="line">  <span class="keyword">this</span>.currentIndex = <span class="keyword">this</span>.currentIndex === <span class="number">0</span> ? <span class="keyword">this</span>.list.length - <span class="number">1</span> : <span class="keyword">this</span>.currentIndex - <span class="number">1</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><h4 id="前后轮播图的切换轮播图"><a href="#前后轮播图的切换轮播图" class="headerlink" title="前后轮播图的切换轮播图"></a>前后轮播图的切换轮播图</h4><p><img src="https://user-gold-cdn.xitu.io/2018/6/25/16436bd10e7b0a03?w=600&amp;h=185&amp;f=gif&amp;s=1750402" alt="前后轮播图的切换轮播图"><br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">onClick (i) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i === <span class="keyword">this</span>.currentIndex)&#123;</span><br><span class="line">    <span class="keyword">this</span>.$emit(<span class="string">'sliderClick'</span>, i);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    let currentClickClassName = <span class="keyword">this</span>.sliderDomList[i].className.split(<span class="string">' '</span>)[<span class="number">1</span>]</span><br><span class="line">    console.log(currentClickClassName)</span><br><span class="line">    <span class="keyword">if</span> (currentClickClassName === <span class="string">'next'</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.prev()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="dots轮播图的切换轮播图"><a href="#dots轮播图的切换轮播图" class="headerlink" title="dots轮播图的切换轮播图"></a>dots轮播图的切换轮播图</h4><p><img src="https://user-gold-cdn.xitu.io/2018/7/3/1645f6baaa112d88?w=600&amp;h=185&amp;f=gif&amp;s=1293241" alt="dots轮播图的切换轮播图"></p><p>这里比较简单，只需要设置它的鼠标事件即可<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@mouseover</span>=<span class="string">"currentIndex = index"</span></span><br></pre></td></tr></table></figure></p><p>代码传送门：<a href="https://github.com/Rain120/vue-study/blob/master/my-project/src/components/barousel.vue" target="_blank" rel="noopener">Vue网易云音乐轮播图的实现</a><br>到这里，基本上我们提出的业务逻辑原理都已经实现了，到时候我会将代码整理完了commit到github上，现在正在整理ing，谢谢。</p><p>代码传送门：<a href="https://github.com/Rain120/vue-study/blob/master/my-project/src/components/barousel.vue" target="_blank" rel="noopener">Vue网易云音乐轮播图的实现</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近在刷网易云音乐歌单时发现首页的轮播图很有意思，正好自己想尝试做一个PC版的网易云音乐，于是就是使用Vue去做这个demo，废话少说，我要出招了，接招吧&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/6/25/16
      
    
    </summary>
    
      <category term="Vue" scheme="https://rain120.github.io/categories/Vue/"/>
    
    
      <category term="Vue" scheme="https://rain120.github.io/tags/Vue/"/>
    
      <category term="better-scroll" scheme="https://rain120.github.io/tags/better-scroll/"/>
    
      <category term="网易云音乐" scheme="https://rain120.github.io/tags/%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90/"/>
    
      <category term="轮播图" scheme="https://rain120.github.io/tags/%E8%BD%AE%E6%92%AD%E5%9B%BE/"/>
    
  </entry>
  
</feed>
